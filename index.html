<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ãƒãƒŠãƒãƒŠã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-color: #1a1a1a; --cell-bg: #444444; --grid-line: #111111;
            --text-white: #ffffff; --lamp-blue: #33aaff; --lamp-yellow: #ffdd44;
            --lamp-green: #44ff44; --lamp-red: #ff4444; --lamp-purple: #d044ff; --lamp-white: #dddddd;
            --active-btn: #007aff;
        }
        
        /* å…¨è¦ç´ ã«å¯¾ã—ã¦ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—æ‹¡å¤§åˆ¤å®šã‚’ç„¡åŠ¹åŒ– */
        * { touch-action: manipulation; }

        html, body {
            background: var(--bg-color); color: var(--text-white);
            font-family: -apple-system, sans-serif; margin: 0; padding: 0; height: 100%;
            user-select: none; -webkit-user-select: none; 
            touch-action: manipulation;
        }
        .rainbow {
            background: linear-gradient(to right, #ff3333, #ffff33, #33ff33, #33ffff, #3333ff, #ff33ff, #ff3333);
            background-size: 200% auto; -webkit-background-clip: text; background-clip: text;
            -webkit-text-fill-color: transparent; font-weight: bold; animation: rainbow_move 3s linear infinite;
        }
        @keyframes rainbow_move { to { background-position: 200% center; } }
        
        /* ã€Œè™¹ã€æ–‡å­—å°‚ç”¨ã®è™¹è‰²ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã—ãƒ»ç”»åƒå‡ºåŠ›å¯¾å¿œï¼‰ */
        .rainbow-char {
            background: linear-gradient(to right, #ff3333, #ffff33, #33ff33, #33ffff, #3333ff, #ff33ff);
            -webkit-background-clip: text; background-clip: text;
            -webkit-text-fill-color: transparent; font-weight: bold;
            display: inline-block;
        }
        
        /* è™¹æ–‡å­—ç”»åƒã‚¹ã‚¿ã‚¤ãƒ« */
        .rainbow-img {
            display: inline-block;
            width: 1em;
            height: 1em;
            vertical-align: middle;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZzEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZmYwMGZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZmYwMDAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iNDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZjAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iNjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMDBmZjAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iODAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMDBmZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzAwMDBmZiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPHRleHQgeD0iMTIiIHk9IjE4IiBmb250LXNpemU9IjIwIiBmb250LXdlaWdodD0iYm9sZCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0idXJsKCNnMSkiPuiZuTwvdGV4dD4KPC9zdmc+');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        /* æ·»ä»˜ç”»åƒã®è™¹ã‚¢ã‚¤ã‚³ãƒ³ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .rainbow-icon {
            height: 1.1em;           /* æ–‡å­—ã®é«˜ã•ã«åˆã‚ã›ã‚‹ */
            vertical-align: -0.2em;  /* ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’å¾®èª¿æ•´ã—ã¦æ–‡å­—ã¨é«˜ã•ã‚’æƒãˆã‚‹ */
            display: inline-block;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 4px 12px; background: #000; position: sticky; top: 0; z-index: 100;
            border-bottom: 1px solid #333; height: 40px; box-sizing: border-box;
        }
        .header-icon { font-size: 20px; cursor: pointer; color: white; padding: 5px; }
        .header-title { font-size: 14px; font-weight: bold; border-bottom: 2px solid white; }
        
        .container { padding: 5px 10px 80px; width: 100%; box-sizing: border-box; }

        /* ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        .main-layout { display: flex; flex-direction: column; gap: 5px; width: 100%; }
        .col-left, .col-right { display: flex; flex-direction: column; width: 100%; }
        
        @media (orientation: landscape) {
            .main-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; align-items: start; }
        }

        .section-title { text-align: center; margin: 6px 0 2px; font-size: 11px; font-weight: bold; }
        .grid { display: grid; gap: 1px; background: var(--grid-line); border: 1px solid var(--grid-line); margin-bottom: 5px; }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-5 { grid-template-columns: repeat(5, 1fr); }
        .grid-2 { grid-template-columns: 1fr 1fr; }
        
        .cell { background: var(--cell-bg); padding: 5px 2px; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 40px; }
        .label { font-size: 10px; color: white; margin-bottom: 1px; pointer-events: none; }
        .value { font-size: 20px; font-weight: bold; line-height: 1.2; pointer-events: none; }
        .touch-active { background: #666 !important; }
        .minus-mode { background: #900 !important; }
        .selected-lamp { border: 2px solid #fff; background: #666; }
        .active-mode { background: var(--active-btn) !important; color: white; }
        .val-input { width: 100%; background: transparent; color: white; border: none; text-align: center; font-size: 20px; font-weight: bold; outline: none; }
        
        /* è¨­å®šç”»é¢ç”¨ã®å¤§ããªæ–‡å­— */
        .label-large { font-size: 16px !important; font-weight: bold; color: white; margin-bottom: 0; pointer-events: none; }

        /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 200; flex-direction: column; }
        .modal.active { display: flex; }
        .modal-header { flex: 0 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 4px 12px; background: #000; border-bottom: 1px solid #333; height: 40px; box-sizing: border-box; }
        .modal-body { flex: 1 1 auto; overflow-y: auto; padding: 10px 15px 40px; }

        /* ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆåŒ–ã•ã‚ŒãŸè©³ç´°ãƒ‡ãƒ¼ã‚¿ãƒ»æœŸå¾…å€¤å‘¨ã‚Š */
        .expect-box { background: #222; padding: 5px 10px; border: 1px solid #444; margin-bottom: 10px; }
        .expect-row { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 2px; }
        .expect-val { font-weight: bold; } 

        .detail-table { width: 100%; border-collapse: collapse; font-size: 12px; color: white; }
        .detail-table th { background: #222; text-align: left; padding: 4px 4px; border-bottom: 1px solid #444; font-weight: normal; }
        .detail-table td { padding: 4px 4px; border-bottom: 1px solid #444; text-align: right; font-weight: bold; cursor: pointer; }

        @media (orientation: landscape) {
            .modal-body { padding: 5px 15px 20px; }
            .modal-body .section-title { margin: 4px 0 1px; font-size: 10px; }
            .modal-body .cell { min-height: 30px; padding: 2px; }
            .modal-body .value { font-size: 16px; }
            .modal-body .label { font-size: 9px; }
            .modal-body .val-input { font-size: 16px; }
            .modal-body button { padding: 8px; margin-top: 10px; font-size: 12px; }
            .detail-table th, .detail-table td { padding: 4px 4px; font-size: 11px; }
            .bar-row { margin: 2px 0; font-size: 11px; }
            .bar-bg { height: 8px; }
            .expect-box { padding: 4px 8px; margin-bottom: 6px; }
            .expect-row { font-size: 11px; margin-bottom: 1px; }
        }

        .bar-row { display: flex; align-items: center; margin: 6px 0; font-size: 13px; color: white; }
        .bar-label { width: 40px; }
        .bar-bg { flex: 1; height: 10px; background: #333; margin: 0 8px; border-radius: 2px; overflow: hidden; }
        .bar-fill { height: 100%; background: #fff; width: 0%; transition: width 0.3s; }
        .bar-val { width: 45px; text-align: right; font-variant-numeric: tabular-nums; }

        .sub-graph-row { display: none; background: #111; }
        .sub-graph-row.open { display: table-row; }
        .white-txt { color: #fff !important; font-weight: normal; }
        .export-btn { width: 100%; padding: 15px; background: #000; color: #0ff; border: 1px solid #0ff; margin-top: 10px; font-weight: bold; }
        
        select { color: white; }

        /* ç”»åƒç”Ÿæˆç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« */
        #img-modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:300; flex-direction:column; align-items:center; justify-content:center; }
        #img-preview { max-width: 90%; max-height: 80%; border: 1px solid #555; margin-bottom: 10px; }
        #img-controls { display: flex; gap: 20px; }
        
        /* ã‚­ãƒ£ãƒ—ãƒãƒ£ç”¨ä¸å¯è¦–ã‚¨ãƒªã‚¢ */
        #capture-target {
            position: fixed; top: 0; left: 0; z-index: -9999;
            width: 400px; background: #1a1a1a; color: white; padding: 20px;
            font-family: -apple-system, sans-serif;
            visibility: visible; 
        }
    </style>
</head>
<body>

<div class="header">
    <div class="header-icon" onclick="openModal('predict-modal')">ğŸ”</div>
    <div class="header-title" id="disp-machine">---</div>
    <div class="header-icon" onclick="openModal('setting-modal')">âš™ï¸</div>
</div>

<div class="container">
    <div id="main-ui"></div>
</div>

<div id="setting-modal" class="modal">
    <div class="modal-header">
        <div style="width:24px;"></div><div style="font-weight:bold; color:white;">è¨­å®š</div>
        <div class="header-icon" onclick="closeModal('setting-modal')">âœ•</div>
    </div>
    <div class="modal-body">
        <p class="section-title">ï¼œæ©Ÿç¨®é¸æŠï¼</p>
        <div class="grid">
            <select class="val-input" style="background:#333; padding:5px;" id="machine-select" onchange="updateMachine()">
                <option value="king">ã‚­ãƒ³ã‚°ãƒãƒŠãƒãƒŠ</option>
                <option value="newking">ãƒ‹ãƒ¥ãƒ¼ã‚­ãƒ³ã‚°ãƒãƒŠãƒãƒŠâ…¤</option>
            </select>
        </div>
        <p class="section-title">ï¼œè¡¨ç¤ºãƒ»å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ï¼</p>
        <div class="grid grid-2">
            <div class="cell" id="btn-view-personal" onclick="setViewMode('personal')"><div class="label-large">å€‹äºº</div></div>
            <div class="cell" id="btn-view-total" onclick="setViewMode('total')"><div class="label-large">å…¨ã¦</div></div>
        </div>
        <p class="section-title">ï¼œå…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ï¼</p>
        <div class="grid grid-2">
            <div class="cell" id="btn-mode-tap" onclick="setInputMode('tap')"><div class="label-large">ã‚¿ãƒƒãƒ—</div></div>
            <div class="cell" id="btn-mode-input" onclick="setInputMode('input')"><div class="label-large">å…¥åŠ›</div></div>
        </div>
        <p class="section-title">ï¼œæ‰“ã¡å§‹ã‚ãƒ‡ãƒ¼ã‚¿ï¼</p>
        <div class="grid grid-3">
            <div class="cell"><div class="label">ã‚²ãƒ¼ãƒ æ•°</div><input type="number" class="val-input" id="start-g" onchange="saveStart()" onfocus="this.select()"></div>
            <div class="cell"><div class="label">BIG</div><input type="number" class="val-input" id="start-b" onchange="saveStart()" onfocus="this.select()"></div>
            <div class="cell"><div class="label">REG</div><input type="number" class="val-input" id="start-r" onchange="saveStart()" onfocus="this.select()"></div>
        </div>
        <p class="section-title">ï¼œBIGï¼šç­ä½“ãƒ©ãƒ³ãƒ—(æœä¸€)ï¼</p>
        <div class="grid grid-5" id="morning-lamp-selector"></div>
        <button onclick="exportData()" class="export-btn">ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ”ãƒ¼ãƒ»ç”»åƒå‡ºåŠ›</button>
        <button onclick="resetAll()" style="width:100%; padding:15px; background:transparent; color:#f44; border:1px solid #f44; margin-top:20px; font-weight:bold;">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
</div>

<div id="predict-modal" class="modal">
    <div class="modal-header">
        <div style="width:24px;"></div><div style="font-weight:bold; color:white;">è¨­å®šæ¨æ¸¬</div>
        <div class="header-icon" onclick="closeModal('predict-modal')">âœ•</div>
    </div>
    <div class="modal-body">
        <p class="section-title" id="title-predict">ï¼œæ¨æ¸¬è¨­å®šï¼</p>
        <div id="predict-bars" style="background:#222; padding:5px 10px; border-radius:5px;"></div>
        <p class="section-title" id="title-expect">ï¼œæœŸå¾…å€¤ï¼</p>
        <div class="expect-box" id="expect-info"></div>
        <p class="section-title" id="title-detail">ï¼œè©³ç´°ãƒ‡ãƒ¼ã‚¿ï¼</p>
        <table class="detail-table" id="detail-rows"></table>
    </div>
</div>

<div id="img-modal">
    <div style="color:white; margin-bottom:10px; font-weight:bold;">ç”»åƒã‚’ç”Ÿæˆã—ã¾ã—ãŸ</div>
    <img id="img-preview" src="">
    <div id="img-controls">
        <button onclick="downloadImage()" style="padding:10px 20px; background:#007aff; color:white; border:none; border-radius:5px; font-weight:bold;">ç”»åƒã‚’ä¿å­˜</button>
        <button onclick="document.getElementById('img-modal').style.display='none'" style="padding:10px 20px; background:#555; color:white; border:none; border-radius:5px;">é–‰ã˜ã‚‹</button>
    </div>
</div>

<div id="capture-target"></div>

<script>
    document.addEventListener('dblclick', function(e) { e.preventDefault(); }, { passive: false });

    const SINGLE_DEFAULT = {
        start: { g:0, b:0, r:0 },
        cur: { g:0, b:0, r:0, bell:0, suika:0, suikaR:0, retro_d:0, retro:0 },
        lamps: { big: [0,0,0,0,0], regS: [0,0,0,0,0], regT: [0,0,0,0,0] },
        morning: -1
    };

    const DEFAULTS = {
        machine: 'king', mode: 'tap', viewMode: 'personal',
        king: JSON.parse(JSON.stringify(SINGLE_DEFAULT)),
        newking: JSON.parse(JSON.stringify(SINGLE_DEFAULT))
    };

    // ç”»åƒã®ãƒ•ã‚¡ã‚¤ãƒ«åãŒ "è™¹.png" ã§ã€HTMLã¨åŒã˜å ´æ‰€ã«ã‚ã‚‹ã¨ä»®å®šã—ã¦ã„ã¾ã™
    const RAINBOW_IMG = '<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAABGdBTUEAALGPC/xhBQAACjdpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAAEiJnZZ3VFPZFofPvTe9UJIQipTQa2hSAkgNvUiRLioxCRBKwJAAIjZEVHBEUZGmCDIo4ICjQ5GxIoqFAVGx6wQZRNRxcBQblklkrRnfvHnvzZvfH/d+a5+9z91n733WugCQ/IMFwkxYCYAMoVgU4efFiI2LZ2AHAQzwAANsAOBws7NCFvhGApkCfNiMbJkT+Be9ug4g+fsq0z+MwQD/n5S5WSIxAFCYjOfy+NlcGRfJOD1XnCW3T8mYtjRNzjBKziJZgjJWk3PyLFt89pllDznzMoQ8GctzzuJl8OTcJ+ONORK+jJFgGRfnCPi5Mr4mY4N0SYZAxm/ksRl8TjYAKJLcLuZzU2RsLWOSKDKCLeN5AOBIyV/w0i9YzM8Tyw/FzsxaLhIkp4gZJlxTho2TE4vhz89N54vFzDAON40j4jHYmRlZHOFyAGbP/FkUeW0ZsiI72Dg5ODBtLW2+KNR/Xfybkvd2ll6Ef+4ZRB/4w/ZXfpkNALCmZbXZ+odtaRUAXesBULv9h81gLwCKsr51Dn1xHrp8XlLE4ixnK6vc3FxLAZ9rKS/o7/qfDn9DX3zPUr7d7+VhePOTOJJ0MUNeN25meqZExMjO4nD5DOafh/gfB/51HhYR/CS+iC+URUTLpkwgTJa1W8gTiAWZQoZA+J+a+A/D/qTZuZaJ2vgR0JZYAqUhGkB+HgAoKhEgCXtkK9DvfQvGRwP5zYvRmZid+8+C/n1XuEz+yBYkf45jR0QyuBJRzuya/FoCNCAARUAD6kAb6AMTwAS2wBG4AA/gAwJBKIgEcWAx4IIUkAFEIBcUgLWgGJSCrWAnqAZ1oBE0gzZwGHSBY+A0OAcugctgBNwBUjAOnoAp8ArMQBCEhcgQFVKHdCBDyByyhViQG+QDBUMRUByUCCVDQkgCFUDroFKoHKqG6qFm6FvoKHQaugANQ7egUWgS+hV6ByMwCabBWrARbAWzYE84CI6EF8HJ8DI4Hy6Ct8CVcAN8EO6ET8OX4BFYCj+BpxGAEBE6ooswERbCRkKReCQJESGrkBKkAmlA2pAepB+5ikiRp8hbFAZFRTFQTJQLyh8VheKilqFWoTajqlEHUJ2oPtRV1ChqCvURTUZros3RzugAdCw6GZ2LLkZXoJvQHeiz6BH0OPoVBoOhY4wxjhh/TBwmFbMCsxmzG9OOOYUZxoxhprFYrDrWHOuKDcVysGJsMbYKexB7EnsFO459gyPidHC2OF9cPE6IK8RV4FpwJ3BXcBO4GbwS3hDvjA/F8/DL8WX4RnwPfgg/jp8hKBOMCa6ESEIqYS2hktBGOEu4S3hBJBL1iE7EcKKAuIZYSTxEPE8cJb4lUUhmJDYpgSQhbSHtJ50i3SK9IJPJRmQPcjxZTN5CbiafId8nv1GgKlgqBCjwFFYr1Ch0KlxReKaIVzRU9FRcrJivWKF4RHFI8akSXslIia3EUVqlVKN0VOmG0rQyVdlGOVQ5Q3mzcovyBeVHFCzFiOJD4VGKKPsoZyhjVISqT2VTudR11EbqWeo4DUMzpgXQUmmltG9og7QpFYqKnUq0Sp5KjcpxFSkdoRvRA+jp9DL6Yfp1+jtVLVVPVb7qJtU21Suqr9XmqHmo8dVK1NrVRtTeqTPUfdTT1Lepd6nf00BpmGmEa+Rq7NE4q/F0Dm2OyxzunJI5h+fc1oQ1zTQjNFdo7tMc0JzW0tby08rSqtI6o/VUm67toZ2qvUP7hPakDlXHTUegs0PnpM5jhgrDk5HOqGT0MaZ0NXX9dSW69bqDujN6xnpReoV67Xr39An6LP0k/R36vfpTBjoGIQYFBq0Gtw3xhizDFMNdhv2Gr42MjWKMNhh1GT0yVjMOMM43bjW+a0I2cTdZZtJgcs0UY8oyTTPdbXrZDDazN0sxqzEbMofNHcwF5rvNhy3QFk4WQosGixtMEtOTmcNsZY5a0i2DLQstuyyfWRlYxVtts+q3+mhtb51u3Wh9x4ZiE2hTaNNj86utmS3Xtsb22lzyXN+5q+d2z31uZ27Ht9tjd9Oeah9iv8G+1/6Dg6ODyKHNYdLRwDHRsdbxBovGCmNtZp13Qjt5Oa12Oub01tnBWex82PkXF6ZLmkuLy6N5xvP48xrnjbnquXJc612lbgy3RLe9blJ3XXeOe4P7Aw99D55Hk8eEp6lnqudBz2de1l4irw6v12xn9kr2KW/E28+7xHvQh+IT5VPtc99XzzfZt9V3ys/eb4XfKX+0f5D/Nv8bAVoB3IDmgKlAx8CVgX1BpKAFQdVBD4LNgkXBPSFwSGDI9pC78w3nC+d3hYLQgNDtoffCjMOWhX0fjgkPC68JfxhhE1EQ0b+AumDJgpYFryK9Issi70SZREmieqMVoxOim6Nfx3jHlMdIY61iV8ZeitOIE8R1x2Pjo+Ob4qcX+izcuXA8wT6hOOH6IuNFeYsuLNZYnL74+BLFJZwlRxLRiTGJLYnvOaGcBs700oCltUunuGzuLu4TngdvB2+S78ov508kuSaVJz1Kdk3enjyZ4p5SkfJUwBZUC56n+qfWpb5OC03bn/YpPSa9PQOXkZhxVEgRpgn7MrUz8zKHs8yzirOky5yX7Vw2JQoSNWVD2Yuyu8U02c/UgMREsl4ymuOWU5PzJjc690iecp4wb2C52fJNyyfyffO/XoFawV3RW6BbsLZgdKXnyvpV0Kqlq3pX668uWj2+xm/NgbWEtWlrfyi0LiwvfLkuZl1PkVbRmqKx9X7rW4sVikXFNza4bKjbiNoo2Di4ae6mqk0fS3glF0utSytK32/mbr74lc1XlV992pK0ZbDMoWzPVsxW4dbr29y3HShXLs8vH9sesr1zB2NHyY6XO5fsvFBhV1G3i7BLsktaGVzZXWVQtbXqfXVK9UiNV017rWbtptrXu3m7r+zx2NNWp1VXWvdur2DvzXq/+s4Go4aKfZh9OfseNkY39n/N+rq5SaOptOnDfuF+6YGIA33Njs3NLZotZa1wq6R18mDCwcvfeH/T3cZsq2+nt5ceAockhx5/m/jt9cNBh3uPsI60fWf4XW0HtaOkE+pc3jnVldIl7Y7rHj4aeLS3x6Wn43vL7/cf0z1Wc1zleNkJwomiE59O5p+cPpV16unp5NNjvUt675yJPXOtL7xv8GzQ2fPnfM+d6ffsP3ne9fyxC84Xjl5kXey65HCpc8B+oOMH+x86Bh0GO4cch7ovO13uGZ43fOKK+5XTV72vnrsWcO3SyPyR4etR12/eSLghvcm7+ehW+q3nt3Nuz9xZcxd9t+Se0r2K+5r3G340/bFd6iA9Puo9OvBgwYM7Y9yxJz9l//R+vOgh+WHFhM5E8yPbR8cmfScvP174ePxJ1pOZp8U/K/9c+8zk2Xe/ePwyMBU7Nf5c9PzTr5tfqL/Y/9LuZe902PT9VxmvZl6XvFF/c+At623/u5h3EzO577HvKz+Yfuj5GPTx7qeMT59+A/eE8/vH0Tt4AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAbdEVYdFNvZnR3YXJlAENlbHN5cyBTdHVkaW8gVG9vbMGn4XwAACAASURBVHic7Z17vGRXVed/+9br3vDK0JCEIXIDRNJAI42ANJAPFBKdjIqi8tEwk9ESceSDyGMEEQWDoDwUJ4BBg0QSNIAICmrQ8DJH7IEoCSSQSAMJFJBAhySQQKf7PurePX+cc26ts87aj1O39u2urvX7fM6nQtOPW6fqfPf6rbX22sZaC5VKpZoFGQWWSqWaFSmwVCrVzEiBpVKpZkYKLJVKNTNSYKlUqpmRAkulUs2MFFgqlWpmpMBSqVQzIwWWSqWaGSmwVCrVzEiBpVKpZkYKLJVKNTNSYKlUqpmRAkulUs2MFFgqlWpmpMBSqVQzIwWWSqWaGSmwVCrVzEiBpVKpZkYKLJVKNTNSYKlUqpmRAkulUs2MFFgqlWpmpMBSqVQzIwWWSqWaGSmwVCrVzEiBpVKpZkYKLJVKNTNSYKlUqpmRAkulUs2MFFgqlWpmpMBSqVQzIwWWSqWaGSmwVCrVzEiBpVKpZkYKLJVKNTNSYKlUqpmRAovLPP7JwBrya724RsX/3ij+90bxa5vk1QILyK9WcbWL1w5uQhtD3Gw3dvjdqFTHlRRYXOZxdgyrNeRAWievJawotDYAg/xqI4fWGFbl6whtXIcuLkcbF+J6+9WdfWMq1exLgcVlHmOrsKLQkmA1AmBzWLVQhRWFVrt4za9D6GI3rrY37+A7U6lmXgosLvNoW7WD5RVpBzms2uCwyqOtHk7Hf2iUpVI1kQKLy+y1cXZwAw3sYP5rXeSw6uI5+LT9i518WyrV8SAFFpd5pK0n3GmEVUZWJbSIHaQXjazGrzehi2fjs/ZDO/qeVKrjRAosLrPH1mE1QjV3RSMsW60M8txVC3lk1cal6OJ5uN7eubNvSKU6fqTA4jIPt43toNTKwCOsLvo4YP91Z9+MSnV8SYHFZXbbanWQXqyVwWUHee4qT7T38XkFlkq1HSmwuMwZtl4dpMBidpC2MpSv9BpXBvu4XoGlUm1HCiwuc7qt567Ki7YybDaxgzmwPqfAUqm2IwUWl3mwjepsp8l23n/Fo6syh3WtAkul2o4UWFzmgUKEJSXc4baDNIfVwTjC+owCS6XajhRYXOY0R4Ql2EFX71XdDuYR1lUKLJVqO1JgcZnvs3J1sIysRvnv89lBvnewjLA+pcBSqbYjBRaXOdXKrQyCHXQ1i9b3DgI99HGlAkul2o4UWFzmv1o/rDbdc6/cdjCPsD6pwFKptiMFFpe5nxBh0QtuWNFEe9UO5jms/QoslWo7UmBxmZOFCKtsZfDYQamdgUZYXfTxcQWWSrUdKbC4zEk2yg5Ko2TcdjDPYV2hwFKptiMFFpe5j62PkikjLPhzVzzZPoZVnsP6FwWWSrUdKbC4zC7rtINNxiBX7WAeYX1YgaVSbUcKLC7zX6x37pV8Kk7IDuY5rA/NJ7CeAPPkVeQxa/nqmzZWmG+E50534bvhwCJ57QFYIq9Lxa8vkv9/kf05+vfRf6/8oPnPVaxmdmG8zpVX+Qb5G6fnnZQ3aA3ACnldBXCkeD1c/Bq9VtnvX2PXhOPdyqwH37hB1+Quudu98V285j0WSea+KbC4zIm23tnO5l6FxyDXI6xF9PHB+QTW42AshRWfNsafnbw1N3ZnOX986GNUQqh8pdcSeZVg1UP9g+T/Lv+5ip+3JC4vMHNolCDhsKLQorA6Uvxa+UphtSr8+djDn4TxbrEGgsOquJP9d1kk+a4rsLjMPa13DLJro7PfDuYR1mXzCazHwli+2PuGT+fRVezcafcNr8KqjKworHiERS8OQb6bnUdYZDVzwYpDi8KqvEEcVhRaHFYUWhxWNJTlN93VsWPdRxNIBoLCit3t/l8psHZI5p7WGydPZgfzCOsD8wmsRwvACtvB2EFjrhvOI6wQrLZjB8ufr4hPOAhi7CCHDYVVCSZXhEUvCivfDY8Y7xYyEA47iEWgf4kCa4dk7m5rn2SMHXRVB2mE9f75BNajYKy04LsOTms2aKyNcUTkWfNrNpDDqsf+PIcVj6547qq4uB2ksCpf6SXZQXpt1w6GoithvFuMHfSZ7yWg/xcKrB2SuZsV4+S4Mcg+d9LHe+cTWD9Q5LD40bSu0YiyMeERFoVICFahCIvnrmiExWHlyV1JdpACgkZWNMKiFQl6cetHocUjMFfuSoJVYLxbTHmDIp1nCntA/20KrB2SOcE64+QmdrAeL/fxnvkE1p7CEsYcnJZ/G6UbzmHl8t8s/RsVYdGLxw8N7KBdqA71kCIsDqtJ7CCNvLgdbFIdrK4S3jWZLw1SLZbUYPt/psDaIZkl67SD8RudpQW/j3fNJ7AexiIsX2W92jviyl257GAH/laGJnYwtjpI4DotO8hhVYKKwyrUyiDdcM+079jyRsAOYhHoX6DA2iGZnnWeiiM1poTs4Pjq49L5BNbuIsKKqaz77eAk1UF6nYAqxFzVQQqtyFYG2nvFI6xQK4PPDvKqoM8O+npHeNLQMd4txkBEZAr7b1Jg7ZBMz3rLJq6tOGF30scl8wmshxQRlsudkGwh4rcSUFDxG04Niqvvagn1D0nKXVFoSeM5ymZR47eDk1QHeaI9lLuKqQ467GBoifAtDcwOYhHo/18F1g7JdKxYNomtDrrj5T7ePp/AOp0AS1rox3aQhrMhOxjTyhCCFbWP9O/hCX36gTvsIGm+rHXBxnS2N81dSbByVQd5OTYw3k1qZShfqWnmpprEsf0/VGDtkEzH1somTdwJL5/QCOtt8wmsB8HY8lmVnp0RyuiKN7vRx0aqDvLVIdTKINnBReHv4bAK2UEj28FQs6irs33SZlGeu1pj/z6HFbGDrm43qToYuttLQP+1CqwdkmlZ8VScyauD4wjrrfMJrNOKCEvKXZWvuaTO9ia9I6FmURespIQ7rw7S2INeC8CmkSMs+oabVAcnaWVoagfHScPoepJ7La7d5f7vK7B2SCWwJhuDXH92xp9oH2+ZT2A9oIiwfM+Of2d5C3WISM2i/BGKsYOTVAdpTLIQZwd5dZACaxp7B/k2n1A5Vhjv1qQ6SMsVvKyxCPR/T4G1QzKm6k6a2kF372IffzKfwPo+R4RVupK6HZzODW/WLDppddBUE9hNqoNN7KCrlSG2OiivEt5jNXnuSip+S0vDCUD/FQqsHZIxttZ7JfUuNncnfZw/n8C6P4mwZDu4vUFj9Rvui7BcdtDXLCrBqmwWNfLeQZ8dpJCRYFVGU4dRhZe0d5DDqoEddPVehbIdATuIJaD/2wqsHVIJLCmVwmHli5frGck+/ng+gXW/Alj0Ga72Xk0+d9qdu2rSLEqvUHXQYQdphEUvVytDebnmXsXaQamzPbRZk41382U7eHUwlCksgfVSBdYOyRgrPjtSdCU9O+UnWncnfbx+PoF1Mox1PTu28aAxqToo33B3hOWzg7w6SC/WyhBrB2mEJeWvXM2ik8694uVYuv9JGO8Ws/kpNlNY5rBerMDaIS0YW9vKxp8dX/nElUrpoY/XziewTipyWDzvOz07KN/wrcenctHIKrY6yH+uVv5z0+qgr1mUJ8R57moN9T4r12RR+uek3BXNYUn+27GBw2UgaNxJQSU0i+IEjCOsFyqwdkgtIcKKMfcuOzj+VPt49XwC6z4kwqLPdnXuVUx1UAppt7t30Je7kqKr8ueNtINSdVAaJeNrZfA1i7qqgwE72KSe1MQOlhHWryuwdkitIsKaVrFqHDP38cr5BNYumCukfbf5Ou+acSnZwSbti75mUR5ZeauDi0B7X80ObppqKwO1ghKwwtXBO7CCa3ZyDHKMHYxbiyuwwhLwwudaXIsEUmBxdUiENak7ofEyBdYr5hNYsyyD7y4DrWGllcE1BjmmOuhuFs3sr+EpO/fOZlPTB5bZ+EX/QCC65IxQr/HGbKqSjgvZbhfdVtnkEq8dlAy+K16uLvivwxIOVJYmekm9iw2KVRb+ySahZ8d1tw9X//f+P4e9sfaZH8cy+F4BLLrR2dMsOulG5xVk9vkKrJBSAIudOiNtqvLtAJUen9iBQLwxhV48Xg/EydJWNl91cBruhGY4Q72LNPVjcmD5trLRK9QGxGFFoDV4O+w7MEcyuGsZWBhWIizpVByplUHqbHevyZl9kQIrpATAWmcjhl07QKU9CrwxZdL5sLwpRYqw6BV5Ko5U63VtrgpV1l29izzCorDqsJ+vgBVYsWrTc9dj2oDo8kCvVWBwyVwCqz2MmnvF12RXs6icbM/sixVYISUA1pqNNyZNHh9eNqG/T+qi4zXegB30FatC1UFX+68vwoqxg5HFKp8d5O7E1wZE7y6/iudq8FdzB6wj1QiLzr3y3fBQSFv/mmf2pQqskBIAa5WdnOzqoqO5JulT5BEW3acQuwN0nf370qaqBmOQXZ3t0+pd3IYdjOlddLUBRdpBrAKDd80lsEiEVdpBX9YjVB3kBiG/8Zn9bQVWSAmAtUIiLJ8xafL4uOygVHZxtfwG7KDU2e6rDvrsYMxWNh5hcViFtrKV0MJ4sXfZwdjyBu9ZZAl3rACD98wdsFaLpHuRbC+ThdKaXF5NKhw0wnqFAiukBMA6bP1ddK6Ee2zu6ojw+9fY3xeygzSeR9whqU2qg7TRmkZartxVqDoYYQc5rJo+OxxW3A6WEdb75hJYRYQ1yRjkODuYR1i/p8AKKRGwYoyJtNZL2RTeysC3rEtddFJ1MGAHfb2LoepgEzvoiq4kWPGkP/05W/ntDg265A0kUmVduttC/gorwOD9cwes9SKH5bCDUnWQrhI08HdlPcoI69UKrJASAOuQrcfJrj0K07SDvuqgYwdorB10tf66mkVDp6L7Whmk6qDHDkoLfqiyzotU0t0W7CBWgcHfzx2wRrklnOYY5DVIq0RmX6vACikRsEItv+EuOn+zKI+wmlQHmR2M2XcrVQdjNldJsIqxg7w6KDWLmqodnKQ66GsWdXS9DS6bO2Bt5BHWtO1gPeuR2dcrsEJKAKw7bTo7OI3qYPmtC9jBmOqgPPfKv+920uqgxw66arKuyrrUBiRFVoIRH/zzXAKrNfS2Mriqg6GOHR5h/bECK6REwPIZkyaPjwtWtFmU/n08sqLgEuzgdk7FodAJDQlYhAwrV3WQd9gLyXbAv5XNt0T4FvojcNpBrAKDD80dsOwyrBmKewelcmxsEZzf9FVk9nwFVkgJgPUd26yVIVRcdyXbeaJdqg7Sx5h+09hxIbHVQdrKwCOrmAiLXnxIgCvZLvVfGflU9NjKussOupLt5PcPPjqPwNo09Qhrnb1KN5yvEtLXnEZYf6LACikBsL4tRFghO+jLXbEsSq2VwVUdpN8mwQ6GDmlxtTJsxw66xjBJdtAFqwZ2sEm3mwQrYRPU4Iq5AxaWsYFhlB2MbXiTv+aZfYsCK6QEwLrN1h+d7drBFfb7JDvoqg5KCXfET+UNVQebNovGVAddW3EKWLnyv5IJj837Ojrbt15LS/iv8wasTSxjE8PoG+6qcPCveT1RmNm3KrBCSgCsW63bmPjsYL1s4m4WlRLukh2k0BKOC2k61Fqyg769g77cVdPqYIQdDGUMpbyvr5VBGHQ5+Ld5BFYZYfmqg76OnbiveWbfpsAKKQGwbrHTs4M8i8K/Bb5WBg6r8tX67aCUcOewmvZG5wnsIH1Xocp6bN43YAexBgw+MW/A2igiLJpViGkxbJ71yOzFCqyQEgDroJWXndjHx7XGV1oZDgFr76vC0AUrFmG5DmkZVwcHwY3OPjtIt+NU7eDl6OJg1NwrCioaYTnmXo2AvSNgb0x1kOeuXMByLBWDK+cRWCMhwvKtyb6GN1fHzgoy+w4FVkgJgPUNKxuTqdrBIez/e+B0f/BCDzBWrA5uv1m0j7PTjEi+Hea8EfBKaVeIrw1IsoPSTAzyqQ3+Y96AtV5YwqblWJ6/ct348Y3O7KUKrJASAOtmKy89/FN0ddHRHmu+NG3Bbgh7ZRpgnWZssLO9jLCa2cE+fiQNsG4rgBVbHeQVdVfCvXbXgcHV8wasNQKs7VYH/T3RmX2XAiukBMD6ug3nrkIGRUr5VqqDQ9h/TwOsBxrrrQ7SjvVQs2j19/fx1DTAuhXmvLUiwvJVB3120NX1xiOsz8wbsFYLYG23Ohjaz7+CzP6NAiukBMD6mp2sE0j+FOuf/DryCOuqNMA6nUVYvrlXoSF91b2DffTTAOsWmPPWhQgrlPd1jZLhsCpf14DBtfMIrBGJsCRYuaqDvIfEVU8qq4TvU2CFlABYXxEirCbZlJAdXEOew/p0GmB9f5HDoonx0Nyr0N7B/M/38eQ0wPomAZYr7+ta6OlG52BcCww+N2/AOkyqhL7qYKwddIeymX2/AiukBMD6so2Pk2NaGVgWZQtY16QB1hkMWK657bF7B8ew6+PMNMC6uchh+TKGrrvNYeWLa9eAwfXzCCxXhNUk6xH+mmf27xVYISUA1g12+naw/HNbS9kQ9rNpgPXQIoclJdx9uSs+WbTeLNrHE9IA66Yih0WXiVg76NroTO8+CSAGn583YB0iOazYzZo0NA3nrsrfn9nLFFghJQDWl2xcK4Nr6fEU1cdr/RD2ujTAengRYbmaRSU7KCXbpQjrcWmA9bXCEsa0AUmtDMGuN2w9k4MvziOwRgxYrhQtzXo0+ZrnV2b/SYEVUgJgHbBxcbK/xut9bLA+hP3PNMDaU0RYtCN9uxud87+njx9KA6whyWHRTN927eAa+/vWgcGX5g1Y32XAcm3WdKVo47Memf2QAiukBMD6vHXDij8+1KDwyIpHWJVvxxD2QBpgPZJEWJId9PVd1VsZ6EbnPh6dBlhfZhGWL+/LYUW73lxxLQkkBjfOG7DuJMBybdYMpWhdEVY1WZjZjyiwQkoArOtsPU7mn2Ls0sMfm/IaDWG/kAZYjyI5LBesmu4dzP++Pn4wDbBuhDlvlVQJU9jBMsL6yrwB6ztFDktqZXA1vNHcVYwdLHNY/6LACikBsD5n3dXBprmrFdT/rjLCuiENsB5NLOE05l6NNzr38cg0wPoiibBi8r6hznYe19II66vzBqxvCxGWrzrIo6vyxvMNHDThnv/5zF6hwAopAbCusfWlxxcn08aUKDuIPMK6MQ2wHstyWNJk0VCzqDyor49HpAHWAVIlDJnvbdhBrAODr88bsG5jEVZ5Q3zNos3tYA6sjyuwQkoArM9Yd5wc+yk6q4PF6/oQ9itpgLWP5bCa2EH++6tjkPt4eBpg/WcRYYXKG65WBimu5Qn84lkd3DxvwLqVRVix+/mlepL/a57Z/QqskBIA6yorx8nTsoMlsL6aBliPN1ace8X7rDi0+FA/agd7ANro42FpgHVdEWGFut1oVdC30bm8+LM5AgbfmDdg3VJEWCW1Q53t5eWDVT26ypPun1RghZQAWJ+y9eqg9PjwRDs19T5jMkKew/p6GmCdWVjC7dhBeQxyH2ekAdZnCbBCd9vXyuCKa8k1ODiPwFovLKG0WZNmPVxJQ/41578//3sye6UCK6QEwLrSyqnfyeJklrsqX4ewN6UB1pMIsFzNoifAN/dKglVeJXxIGmBdQ4AVuttN7GDFhCOPsG6ZN2B9o7CE27WDHFj1NTmzn1JghZQAWJ8gOSzp8XF9mhFF9XFcPoT9RhpgPUUAls8OhquD4wjrwWmA9ekCWK7yhqs66ItrKbRIRX9w67wB6+YiwgqNcm36Na9nPTJ7tQIrpATA+jchwmqy9HA7WYMV8gjrm2mA9cNFDmuSjc40wqIJ9/zq40FpgHVV0Yc1TTvIn80ywrp93oD19SLC8lUHt2MHKbA+o8AKKQGwPm79sKIpYOmTpClfhzHB+hD2ljTA+lEWYTUbg+yygzmwTksDrH8XIixei+WXL66lF80zj4DBt+cNWF8jOSyXHeSwkupKoRTtGjJ7rQIrpATAusKG42QJVr7HhrcXbwxhv5UGWP+NRFhNmkV5K0MJrfGRYX0spwHWJx0RVqwdjDLh+evgjnkD1ldYhDUtO1g3Epm9ToEVUgJgfUyIsJrkrjiwagl35JbwtjTA+jFmCX2wkvYOuk507qKPU9MAaz+LsKToiifc6afiimvpVez9Hdw5b8D6shBh+YrgrsjKlaIdf80ze70CK6QEwPqwrX+Ksbkr+gmK1UGMI6zb0wDrJ4yduFlUSrjTCOv+aYD18SLC8gHLN/eK539FEw5gAxh8d96AdUMBrKZ2kO/nP8J+fz1ZmNnPK7BCSgCsy229xistPa41PmRMNpDnsL6TBlg/VURYTe2guzpYnjfYx/3SACsrgEWfHX63ecLdV5MVqoNbEdaheQPWl7CMNRJh8WR7CSG+SvAb7TMRZYT1BQVWSAmA9UFb/WQmaWVwVgcxjrDuSAOsny4iLAqrElR8KoOvs52fbdhGH6ekAdbHSITFnx1pZnvc80MyhuPXwV3zBqwDLMJqYgfp1z+8OmT2SwqskBIA6x9ZhBVaehoU1SsR1nfTAOsZJMKaxA7Wq4PjCOukNMD6cJHDim1lcMW1nupgOdJ8cHjegPV5IcLyFcF9X3NfEXyEzN6gwAopAbA+YKdrBwVjgtEQ9ntpgPVzJMJybcNx7R2kVxvUDuYR1n3TAOtymPNWWIQ1qR10mnAAm8DgyLwB6zpHhEVvYOya7KoplTmsryiwQkoArL+zzZYenon0FNW3Hp/REPZQGmD9DxZhuYb0xTSLUmi10ceuNMD6IMlh0bvddO6VVB2kBx2PgMHqvAHrcyTConSfZtajtIRDBVZICYD1Xltfdia1g7XqYPHfG0PYu9IA69yICMu10VmqDrYwjrDunQZY/0giLCmyKi9fXCvlrmp3HRiszRuwriERlgSr2K85t4N1/53ZrymwQkoArPdYd2TFWxlohCV1tkvGpIywjqQB1i8WEVbMic4ltKpzr3h1sIRWHyemAdYHigiLt+ZKne3lxVsZOLC4Cd/MXwfr8waszxQRFm/25AZiFb5DUuvNovWsR2a/rsAKKQGw3umIsKSDJnyPjdMOAthMB6xfMja4d5BPFfVXB/OrlQ5Yfwdz3hEWYW3HDkp3vbgGo3kD1lVFhOWqDsbuHXRXB0sjkdlvKLBCSgCsS234U4xpZfAYE4yGsKtpgPUrkRGWe+4Vrw7mEVYbfdwzDbDeW1hCvtCHmkWlBd+1RJQ5rM15A9ansIxVR4QV8zWXUrTyDVdgRSgBsC6xcTXeuDi5akxoDmstDbB+tchh+ZpFeYTlrw6OI6x7pAHWX5MIi0LKZwf5UjEuVjlhhQ1gYOcNWFcWltBnB5umaGnuiuawblFghZQAWG8PRFhNi+rS47MxhF1PA6xfc0RYTewgT7iXEdbd0gDrnSTC8vVfxRWrxOogNjGnwPoEy2GFOnZcKVpfZ25+oxVYEUoArD93RFi+ONlXHaTXVjZlCDtKA6xfL3JYviF9vmZRGlnRCGshHbD+soiw6N2OtYMx1cEi4Q47j8DaTyKsJq0M0t5Btx3MI6zbFFghJQDWhTa89PAar2QH6VrPjAk2hrAbaYD1IsEShuZeuewgjbBa6GMpDbAuZhEW3Y7Dyxy+uNaTu8IGAMAMLDbnC1gfJzksutb6Whlo70hs1mNDgRWjBMC6wBNhTWIHa9EVcmBtpgHWb7AIy9csykfJ0KtqB3NgLaYB1kUkwpJmtsfkf70ZQ+RRFrAwsNiYL2BdwSKsadrB0kjk/juz31FghZQAWG8mOSzXIamx1UEfsGwaYL20iLB8M9tp/5UErGp1cJzD6qYB1ltJhHUEzedeeRtIUNpBgxxYo/kC1sdYhMU7dmJD2XDHjgIrQgmAdb7dvh10rfVF6heb6YD1MkeEFT/3So6wFtIB60+LCIsm2kNLhatY5VoiAAOgNbBYny9gfbiIsGLtYGzvSP2GZ/ZOBVZICYD1BuufseEz9ZIdrOSukEMrIbBeQSKspnaQJ9zHsMojrHYaYP0JA1bMRmdfddBhB5FHWHMGrA9hGSss6e6qJ9FEu2t1cJdjM/tdBVZICYD1OuuGFf3UXZ3tdOkhcwIqERbSAes8IcKKaRZ1wYpGWImA9UaY8w4LOSwp/7uCeu5KMuHl8jDa+ldayCOs1fkC1gdJhJXODuYR1iEFVkgJgPUaIcJqUlSXHp2KHQQMhthMBKxXswiraXWQXjzCWkgDrDcUOazQIamhYlXADiIH1sp8AesfixzWdptFfeXYfE1WYEUoAbBe5YiweHTls4NS22L5aoEFDLGRCFivIXsJQ82iMdXBBYwjrETAer2Qw2piB30ZQ2IHAbQHFkfmC1gfIBFWbO4qZAflG57ZwwqskBIA65WOCEsqqsdUB5kdNMiBNUoErD8kne4xY5BDdrCF/FlvoQ+TBlivIcAKNYv6qoOyHTRbbyCPsA7PF7D+jkRYTTY6+7IecsNbZo8osEJKAKyX2+3HyWIrAwBbupMh1hMB6w2kcdTVyhCqDnI7mEMrGbBeTXJYMXsHQ/sJ6BJB7CByYN01X8B6bwGsWDsY6h1xlWNHyOyqAiukBMB6ma0vO1IX3STVQVsCYIi1RMA6nwBrkuoghRWNsBbQB9IA6zyWw+Kw8vUu+jKGObDKN9BGXiU8NF/Aeg+pEsZskQ0lC3k5drxKKLAilABYvylEWL7Hhi49PHdFo6tN6k6GWE0ErDezU3O2Ux0c20HApAPWy0mE5VoqpM52DiyeMWR2EHkO67vzBax3FRHWJPv5Y2pK4xue2XUFVkgJgPUb1r3G+6qDUsJdsIO5zRpiJRGw/pSdS8jHyLjsoKs6WEIL6YD1W2wvYZMF328H6RtoI7eEd84XsC4tIixeRypv9iRZDzmkVWBFKAGwXiCcmhPbLOqrDoJGLEMcSQSsC1mE5TskNd4OwgJ9kwhYLyF7CZvYQV/GMP9WVOwggM7A4jvzBaxLWIS1vTHIvqxHZjcUWCElANavC6fm8E9xFWMbWG/5DdjBHFiHEwHrbUKEJdlBaQwyBRWNR9+tCgAAIABJREFUsJAWWP9HiLBccW1sxrCabC+h1R5YfHu+gPV2FmH5NnD4iuCu6uB4TVZgRSgBsJ5rq0uPr+VXsoNSs6itPj9tDHEoEbD+whNh8dxVXHUQyN9Fv5UIWC9gEVbMVjbfXc+/ETU7iBxYt88XsN5WAMsHq5jeEZqi5SFtmcOyCqyQEgDrOWRag9SUElsdJJ3tsPzZGeJ7iYD1jiLC8o1BbmIHTQ6AzYTAeh6b6e6Ka5vbQXqVOazb5gtYb8UyjngiLBpZ8X1Psd25ZYSlwAoqAbCebeMem9Bav7XReWwHx53jh9DC+yqd5fTigCnBQyMn9yGpg2ArgzSzfTxZtBphWWDTABvA5RvAQfpdpe++vCt0gS6fAbqFzTEGee8RYK+0d9BXrHKMQYbDDiKPsL41X8B6ixBhhTp2mvrvfJVQYEUoAbCeZauw8nXRRdpB0Z2g3lJAE+K0yZNermmivr2DMZ3t48mi45/T5LdkHPW7YVW+chvn2sLGL98mKMmESxnDuh2kVwd5hHXLfAHrzZ4cVtOsh7SdYJw0VGBFKAGwfsGGYUWhRR9f/imy6iC3XdyWSbCikdIi6pCK2eg8aXXQjBsw6XYXmsoov880wqKwotEVfWZCG51jqoPSKJnxDed2sIywvjlfwDrfk8OSKhtN7eD4a67AilACYJ1r62s8XXp4TOGqDhaPernvtpJKQTXCmp4d3O4Y5GqzKGRYUURTYFFo0Yv3LPJzB13b2Zq4k7EddN3wDnJg3TxfwPrjIocl7RtsmvVwbeDIv+bZhgIrqATAeqZtFif77CBkdxJjB2mExDvXXUd4cViFqoNSOwOxrxZuO+gC1qR2UHqGmpjwcbLduzoMLL4+X8B6vSPCirGD0pq8DmG8mwIrVgmA9fPW3dnOIyxfZ3ut94q5E1ThQaHC7RyNrFLaQZprc9hBevHcVXlRW8cjLD6z3Rdd+dwJf3aqyXan/x5YfG2+gPUaUiV03WxX1iPSDhZ3PVtXYAWVAFjPECKsmDi5fHzIeu9zJ77qYAkZGjFR2xc6d9AFK/lEZ68dpJVrnrtyVQe3awd91UFXxpDNvQKrDmIcYQ3nC1ivZhFWrB0MlWPL1/HXXIEVoQTA+hkWYdHHkT86EXaQPjsp7OB2xyB32M+Zb3T22kFeHZRaGdZQdR/cBvoq7LHuhD47Vgxn+erQHlh8Zb6A9UoWYU3ZDpK7nq0qsIJKAKyftLIdpNkaqcZbfXwq7kR8dsirrzrIYVW++o6gl2A1oR3keVapOhiygzHVwaZ2kFfWI+wg8gjrxvkC1stJW4PLDsakaKWsR3UDR7aiwAoqAbB+wsq5K8nUh+NktzuBnLsqr2nbwbgxyFtbcUJ2UAJWqFmU2kEKsyZb2aRnpzqZweW/u8gjrC/NF7B+2xFh+VoZYquDpMWwDWSHFVhBJQDWf7fuT9HVRSeXTRrZQamVwdUsGjok1dXZTquDrr2DxA7Si8LCVx3kdtDR2b7tMcj0rsvVDSmU7QwsvjBfwPpNFmH5OnZiy7F1O4iWAitKCYB1tpWXHpq1aWAHOaxiq4NNWhk44HhnO7eDHFY04Q7ZDvLqIEc5fQZ4Ml1qZXDtDgkVq/x2kNJX8t+dgcXn5wtYLy4iLN470qRjx2MHyZqcHVJgBZUAWGfZehskb2WIiJNDdtBVHYxtFvXlrnzVwYAdLDY6Bzvby4sv1DF2kMJKariWilXSEiH3Xnm3Egwsrp8vYL2QRFhN7aCnY6e+nx/Z9xRYQSUA1lPtZG2LcpwsRlccVqHqYKwd3P4Y5JodpJDgcaZUHZSaRTmsXIekNnEndTvI/TePsLrII6zPzRewni9EWCFYSeVYR4shCdSzOxVYQSUAVp9EWNI6zyMsR9nEZQepPZNyV9NoFvVVB/lGZ2YHaStD+cqhEaoOhuwghVXsVjZXxpCdikNuNIdVGWFdO1/Aei47NaepHZQ6dup2EG0gu0OBFVQCYD2JAauhHeStDLHVwUntYExne4f9+xKsGtpBXh3kzaK8dSH2kFRpwffbQbo60NyVmCwcWHxmvoD1HHJqTihZ2NAOsq949m0FVlAJgPVEW89duTIpdOkRtuJMWh1s0izK9w76Otsj7KDUyiBVB12d7TzCOgwZVq5hAU0q6+4b7txKMLC4er6A9WwSYdEbzk2ErxxLYSXbQbSB7HYFVlAJgPUEW116fNVBdxedu3cRQAe3oYsX15pFpVaG5nbwkujqYH0McsVuUViNgNetAQfogkwjIyl35WploLBq0rvIn50JBo3tt/jUjZgjmWeRCEtKFrqyHh476FgislsVWEElANbjhAjLtdY7T8UJJduHuD7RiORPGxtdHRTsIIcVaWXoLycakaxKJ/OLLMIK7R10+e/xKuGqJ2XfUmAFlQBYj7X1T9FlTAQ7KBWrJGB9LhGwrjXWudGZ5qOFjc587yCzg/3TFFgzJ/O/HBGWr7NdKsey8W5Ct1t2UIEVVAJg/aCVYSVlIsfFdac7EYtVGOLaRMD6LImwYuygyS8OK6E62H+QAmvmZJ5ZRFi+3hFXOZZnPeAZjQhk31RgBZUAWI+ychYl0g76clfj6uAQn0kErOuLCCu00bl8NVU76KkO9k9XYM2czM8XEZYPVjxFu47qF4L0XvGvOY2wblZgBZUAWD9gq9VB+ilKpj7CDvIIq4chrkoErP8sIqzY6iCixyD3H6LAmjmZZwgRls8OunJXzA5KEdZNCqygEgDrEVZu+ZXaFoWyCd13K9vB3BL+RyJgfYFFWFLuqrzIqThSd3v5rovvdn+3AmvmZH6GAIvCKqY6KNhBj4HIvqrACioBsB5GIiwpd0Vh1cAO0quHIa5MBKwvEmCFNjpHjkEuI6yHKbBmTuYnsYw1EmH5ekekrEecHUQHyIYKrKASAOuhdqI4Obp3EXmE9YlEwLrRWGfuKtIO8mbRMsLao8CaOZmnFTks2jjn28BBjQRpMXRtjyUGIrtRgRVUAmCdYf1xMv004f4k3XYwB9b+RMD6chFhRdjBmDHIpLO9/8hjDFgG99gFtJ4OtPcB7d+yOHj70f6ZjjWZH4uMsDishK95wEBkNyiwgkoArIfYaDvI42TXGCa6dzDvbB/i44mANfREWIFTcVhney3C2nsMAMugswtYeDrQPgdo9YF2u3ijB4B23+Jrtxztn/FYkjm7yGFNwQ66dpuVwPqiAiuoBMB6sHVXBx1jkB2NKeJG5zKHdUUiYH2VRVgBO0jfFa9ss2JS/9FHCVgtmF2bwNOBhXOAhX4OKXHQ2BBon21xwxeOxs95LMr8CImwJqkOxtlBdIDsgAIrqATAepB1DwQiSw/dd9t8DPIQH0sErJuMrXXYb+NUHBphPWYHgXV3mF0j4OkbwDkjoA+Ytt9/b/VyHAQ6fYvrFFoAzFOLCMtXHZSaRdnXnH6N+Nc779RBdr0CK6gEwFq2/tzVCN65V1J1sD5KZogPJwLWzYUljLCDUiuDUB0s23f6+xID6ySYXesEUhtAuzqZwbc6UGh1C2hdPffQMv0iwgrtLKcbOAL7+Wt3O/+17DoFVlAJgPUA685dCXaQw0ow98LcqyEuTwSsbxJgSXaQTGagEVbADmIN6D8+AbAeDLNrDXj6CDhnvYAUf3by5hFpZ7nXfx8Eun2L/XMNLfNklsNyVQcddjBkIMhanF2rwAoqAbBOfbK/s70om1AISK0MUnVwPEpmBf9k/326P3ihgyzC8thBV2c7/U6TuVf9M6cErEcVkFoHzlkD+qMCUq6MYXjutNN/F9D66NxCyzwRy1h3RFi+rIcw3k2qJxEDkV2jwApq+sCadX2L5LB4KwM5FcdlB2l6g8296j9pCsB6bA6rA+vAfWKn8tYH8krlWH4M0dbqcBDo9S3+YS6hZZ7Acli8Z4XnroTeq9A5KsXykF2twApKgcV1axFhOexg7BhkZgexCvSfMqUI6xEwT10DLl8H2ryBhLuT6hhknx2sbiUYv3YBLN4AdM+0eM/ctTyYxwkRVswGjmZ2EF0g+5QCKygFFtftRYQlJdwRbwcZrLAG9J86xRzW98P86jpwocudNDsVR0oW1uZOHwB6j7F4+13Teg+zIPNDJMKSqoMeO+gz4Lye1AOyKxVYQSmwuG4v+rAcdlBqZaARFk91kE3+/R+dctL9ATB/tg48x5cxjJs7LdlB8cy0/UDvLIsLVqf5Po5lmUcXVcLQRmcaYUXaQR5hfVKBFZQCi+sOEmEFxiCHqoNlwr2Yrts/e8rAOhWmNcqt4VlhO+jrHREMivMYoqW/tnjjM6f5Po5lmUcVwApVB2meAOHyRr0XGtl+BVZQCiyuO0gOi17wj0GmFW9qB8khE/0fT9DWcFLeIHrlCDid536bDxrj5Vh6rFB5/FAPwNLvW/zBK6b9Xo5FmUeSHBZPuDv287vsoKu9sFgaso8rsIJSYHF91xFhwW8HPdXBLWA9LVHj6IkwD9/IoXX3qh1sOmjMawfBzkw71+Jl70zxfo4lmUcUwHI1iwbGu0XaQfSA7AoFVlAKLK7vFRGWYAd5K0NMdZAcZ9f/6YSd7neD+dkN4H3lz5WrqR2sVQfJa+3MtBVg6UyL51+d6j0dCzIPwzJGLMKilZZ6h653o7PHfGcfU2AFpcDiuquIsISNzpIdjKgOlucH9n828dacHsxrN4DfyoHl2lke2kpQXk47CAKtm4DFx1j88nHb7mAeyiIsqVmU2MHAGGQpd7UVYX1YgRWUAovrLiHCQr0vkI+S8VQHy0NS+z+XGFjdIglvgbPi7aAELMkO0uiKwqv3UWDxbItnjgO740jmDAIsV+6KJNuljc4uO8jMd3a5AisoBRbXERZhmeZ2kJ8IVUZY5+zAtAYDczJgrgFap8TNCfDZQX5E9iKAE1C3iL3XWfzcy1K/t6Mh8xBSJfRtdPaMQY6pxS4C2WUKrKAUWFwrBbAixyC7qoMMVlgB+ufu0HgZg9YTgYUMaLXlOQF0rW+jDiveylDJXYFFWOV1tsXTPrQT728nZR5c5LB8mzU9+/k9W3Eq5rsHZP+gwApKgcW1SiIsx6k4dKHl1UF+mnkBK6wC/V/YwXlYBr2XAguvc6d+AwYlGlbl7+sdBLp7Lc46rvJZ5kGFJQw0i/KNzq7NTzyeJZnC7P0KrKAUWFxrJMIiY5B5s2hDO4gjQP9ZOzxx1OBuHwFaZ/n3Dkq5Kxph1aqDqMOqfOx6l1k85Wk79f52QuY0FmFJzaJC71VsLZZc2d8qsIJSYHGNjKVzr0IbnakdJKNkKtdKfvWfvfPAOhnoXAe07uOuDrrsoJRsd0VYFdg9z2LfW3bqPaaWWXZEWIIdjClvOOwgekD2NwqsoBRYXKMiwppsDLIIqzLCes5RmOlucOJPAe0P+DeG8I3OFFa1VgZ20RaIHoDOIaC7x+JRX92p95hS5tQiwqJ7sDzj3WLtIDffi0D2bgVWUAosro0iwmJ2sGl1kMEKq0D/uUfpEAqDky4G2oPA3Cu4o6soO4gx+DqZxSOPi4fP3L+IsFwbnR2n4kjlDUd1sLyL2aUKrKAUWFybObBcc69cG51d1cEj49f+848asE65F9C6Duic2qw6KDaLog6rRfb3dAG0Bxa737FT7zGVzP1IhCU1izq24vgG9zjudvaXCqygFFhc1liXHfQ1i7qqg+V1BOi/6CieS2jwgB8H2pfVNzrX5l6hDi1XhEXtIL06ALp3AO3TLR4404ezmlOECIvYQb69nOeufHaQ3e3s7QqsoBRYXAWwXGOQJ7SDOAz0X3KUD1I1OP3dQOccf2d7F/7IikZYPBtTRmxb10UWy7+yU+8vhcxJQoRFNjq77GCD6mB5t7OLFFhBKbBqMtZnB+mmfcfcK9osWkZXWAH6Lz3qwHrIyUDnBqBz92Z2kANLrA6inq1pA+jsszglzYEhOyBz3wJYDjvYcAyyWNoo7nJ2oQIrKAVWTTmwfLmrJnbwyPi1/zvHxFH1j3gp0H1d82ZRDiseYdEYgl7tqyxOfuxOvb9py+zCMjaKPizayrBZtYNNq4OC6c7eosAKSoFVk7GT2kEaYbH8FY4A/d89JoD1yB7QHQLdU6ZrB3mrBH1sW+da3HsmZ2eZe7MIyzP3ilYHeS1Wiq7oXV4EsjcrsIJSYDHZAlhNxiA79g5WIqzDQP9VxwCwAMDgcS8Aum+sty822juIKqy2qoPkdSsFPQRauy3uMXOz4M2JRYTFm0Uhb3SOqQ46lobsfAVWUAosJgtj6XdTamVw7R2ksCoT7gWssAL0f/+oVgkfugy09wHdfUC3D/T2TtcO1nJXqEKr/UKLu71pZ97t9GTuVURYzA5K08Zid2o6arDZHymwglJgMW2QCKvJGGSecCe5qy1L+Lodm9awqwe09+aA6pwJdPblPVghgzJJs6gzd4VqzLFwEGjvtujduQO3YGoy98AyNkmEFbCDrupgxNKQvV6BFZQCi2mDRVj04qNkPBudy1aGSg7rjxIBy6B3f6C1D2idmUOqtRfoLMbtHaQRkwtWPHfF7aArwqJGqQWg9UqL7u+luAepZO4hRFiYeAyyr8st+wMFVlAKLKZ1GMtHyTQYg1xLuB/GGFjnTwFYXZjWJvCYDWAfYM4EFvYB7VMbHyoV3DtYmywKdysDjbBEO1i8tm4DFk61aM1MLsvcrchhTXgqDt/oTPYOVpaGJSB7lQIrKAUW03oRYYWqg565V5IdxArQf9MEwLovzMnrwL4N4MxR/vqYEbCYf2pNT8VxNYs2sYONqoOoxiALAFovtDAzk8syJxTAYnawyRjkDqqwkjKFJwDZ7yqwglJgMa0WEdaEY5BddhBHgP5bAsB6OExrDdg7As5cA/aNgH3rwGm8H6x6Ko7ryM7AoVKhFHD0RmdvdVD4GRcOwppTrSFv4xiWWWIRFqqw8h3r4TLfQnSFJSD7HQVWUAosptUiwuKtDA3mXvHq4BawLmTA+mGYXWvAmasFoNaAx6wDizS5zw9pGU80cZ2K40r9Ruxma9TKQB9HDisOThqTLACbONcuYCb6sswiibAcp+LEjkGW7OAJ49fspQqsoBRYTIeFCEtqZaDnDobsYPFrZ60At63kgNq3kgPq9BVUIeg7YLjM+8p2MDQnQNrN1qRZlD52sdXBrdzV+LIG2MRVtoWZ6H433aJKGHEqTmhbOW8WJXYQi0D2EgVWUAospsMkh0Ujq/JVOIJebBYVgDVaAdr091NbSe2m74Dh/Lnh57P45gRQgxLYzTaRHZSAReFJH28DbJpyL94+28Mxv8fQdMcRFr/rofJGbJdbaQlfpMAKSoHFdKiIsGKqg/Qic68qdrB8pZcEq/KV/7s8dzU+gn47dpCngJvMveLxQ6g6yOzgeGbPJXYJvxT7uRwtmXYRYXlOxeFLBM9d+ZYGCqznK7CCUmAxHYKxHBolSChcXHOvJFgdQR1Wq6jDKs4O0vNZQnMC6JA+nk2hBmUSOxhbHSRnptnK3J4VjHCKvQeO6UZS084jrElOxWlgB7EEZL+mwApKgcV0pxBhxcy9CtjBWq5LsoPUfkojxGU7GPP4hHaz0RQwfawkWHFoSdXBWitD/jq2g+Ube469J94a+9kcDZkFLMPmwHLVY33VQQ4rendPqL5mz1FgBaXAYrqTRVj0Cm10diTbt+wi/f08H8b/LdoHRkcwycYkNEW8aXUwZAdD1UEpwlqowip/vdLeC4+P/GiOikpgkTix0UbnSDuIJSB7tgIrqDkGlmlZYPcGsHsT2DMC9mwAu0f5fzc6JDVkB2mOK9YOcliN8p8Zsh30PT4NdrNFbXT2Jds9dnDTOcb1dHtf3Bj5oe24jMGyAYbSRufY6iDPFBIbSMcjZs9SYAU1H8A6ZM5AG7uxgD1oYy8WsBs5qNq+U3Fc1UHfRmcOLQqr8s/FVgfddtDX2e7qBnLtHWySu6J2kP4b/BGuNYtWTpkp3tgNGOECjHCJPenYzWOVwOLNoq7yRowdpDNcaQ7rFxRYQR1fwLrRnIEOdqOD3Whhb/G6G20s8mKVawxy6JDUwBjkWqKd20Gav+J20FcdHPdehXJXruogjZRq23BWgMUrgaUM6GXA0jOA3vPqfy5UHXTYQUvs4AYuxwYusHfHB6M+06MsY7C8gNwSNq0O8mZRyQ6SX8/OVWAFNZvA+phZRg970MVudLEHHexFtwBThDuhp+Lwjc4bqNozqToYahbldpDnriiwfNVBtx0MzQmg1UFxN9sIWLwKWMxySC1mFr+7tSHZ4C+XgcVhuLO9fFRppCck3DdxBzZxCTZwge0du/ZP0kIBrNjyhi93RSMsagsLoGXPVGAFdWwD6y0FmBaxGz3sKa7d6OHulWfRV1kvv2E0wkL14F7pCK8mp+IIG50b2UFXdbA60aSJHaxVB0dAtwBULwMW91tcdJfv1hu875+B3tnjR4/fcApHV7No6wCwcAE2cYldgPffO1a1YLDcLnJYUrOo1JobyhTyHFbx+7KfV2AFdWwA63+bk7GIvVjEbixhNxaxF0vYjR5OjJrK28CdxNrBmOogTai7WhnKi+a+XNVBnmyv2kFOXdfj0wXQKQDVyXJAdfdb/HMjYBi8/8eB3mUT3PARsHAZ0L7QovWhJv/msai2wXKrsIRNqoO+TU+CHcQikP2sAiuonQXWk8wudLEHPewtIqX8dQknensXaXxNlzIaSLgarQU7WM//uscgx9pBV3WwqR3ksBon231HHnRGQKcAVCfLAXX1tiIag79vAb0h0D01XB1sA2jfAbQvAhYusFj66nb+7WNJ7SLCkuwgrw5K5tsxmUGaNpb9tAIrqDTAWja70MEedIo8U6ewcx3cR4yXY7ay0Wsid4JoO8irgzF20NfZLkVYUnXQbQfFzvZrgHYGdC4H2vsthlO3XAYfKY4Ek6qDW6vDdUDrAqBzySweMhFSt4iw+BJBv3aT2METUF2Pl4DsaQqsoLYHrCVzr6IKtxct7EYHe9EuwOSq9cZkJHl05Wu05hEW/Vaxyjq1g9Mag+yygzx35bODUoRVXsQOFoBqZUA7s/hO8lYAg4+dDHRvAnptliwcAe0PAJ0LLE45Jk4CSqUesYTcBFMrKLUy8AiLw4p+7btA9hMKrKDigGW69wI2dgObe2GwGwsFpBZwykS9i779Cq52IFfvotRoXV405dPK34pFFVaxdtA390qClWujcwM7eM0GkAELGbCQWawflV4lg0+8G+ieU9zw24DORTmolm8+Gj/PTmupqBL6yhv0mtAOYhHIzlZgBRUJrM6XgI3TAVstVpUw4J9mKF72wSpmKxuHVeRWNsCfu+LVwWnZQV9nO6kOXrMBZCMg2wCyNdhjopnS4JNPBnpvBDoXAN1LLc5Yrf7/374Y6AzqG50X6p3tIf8d2v8k3XhXZcO1OoQ2a5K5V7EbnV2tuVKzKE+4u/YT8OI3bSDh9aSFrSadJidq0htOl1V+U7lnkPZscO9Ab7S0HFcSHgNY+w5EKhJYrVcD9uWAjdt3y3sXQ5ur6H6FpnYwtjpo6nYw1MoQM/fKNUomtNF5HTiwDly+XkDq9mMEUE1lcOfFQGtQ89/W1EEQU471VTikZyh2DIZrsyavcESMQfZ9vXnuKmQHXV9zn4Hg0No6HaN2o/lyLMGKD0uiNzS0OvjaoHl2lv9cWyd6DLA5fWA9Gti8aqtYJe1T8NV6pXh5kq1svLLe0A6GPtLYZ2dCO3hgDcjWgGwdyG6AvSV844995cBqD2oRFq9shG54aP9TCFaB1SGqHFskDUP7CaTWXNda7Oq/korgEqxc7YXj5YE26cR6B8lDhELZ0J6NVciwomEBDRe2bvYAG9MGFgAY83Us4NTGvYv0U6BLiQ9WLjvYpDpIL5O/hdBHWn6nOaximkXLiwTNB1aBrLw+eZwAisvge0WERVYHK2x0jinH+p4hn0uJSRa6yrEOO8izHeVXK6Y6yHNXEqya2kHX19tvB/neDRespG/4KtzjJyXf3cQOkpvdwgCjNMA6Hy28sJEdDG2ukqBFIy/65zisGtpBKWh2VQf5sxOygwWsDqwC2ZECUH97nAKKy+AQs4TC3Cv+DLlcCofVGqpQCqVUyj/nsoOhZ8hhByUDEVMd5M2irqwH79hpZgdjQtlYO0iXY37DJTvIoUX/Hbo6Sb57s2wvTASslnkiFrDfu5Vt2naQ/jmp0ZovP65mUcS7k9iF/ghw4EgBqCNA9sY5ARSXweGLgYXB+DFfcD9DHBou/y2lVJrkfyexg4FTcVzVwRg7yJPtk9hBHl3ld3tSO8jr39R/x/jumMoG/cB5on0EAOXzOcBaCmABQNfcihbu47SDvPXXl5GMbRZ1ZSKlT9NjB12tDC5gCcHycAXIyusFsMdNN/d2lAOrPajZQdcN9z1DEatE5b9j7SB/hlwpFUw2x9W3FruAFWMHQ8XvBXELv6uycTTsIL3h9CpC2fwZHWA1FbB65m1o49mVrWyx1cFYO0j3Dk5qB2krg8cOUocvfKTDlSJJvgJkP6OAEmWwQizhQr3RzVeOpREW9+C+/C9/hqQc8AR2kHfs+AxE+XWkKVapUydUHZRqSiE7WD5+27eDMZUNCjHeO9K0OiiEsi0MsJIKWIvmqWjho9HVQV+zqKvvqunSE7CDUtDsiK6G60X+aQ3IHq+AilIOrDLCEsYg0xRGTDk2pR30pVQiTsXhAb5kB0OtDL6OnRgDMS4ISHs2Qt7BZwf5uU98deC/f5X9fa7qoLQ6gDa6DXAkFbCWTAtt3IYWTvSae1f5ZFp2sPz2UGhKERaZeyV8pMN15D1Qa0B2ugJqIhmsFTmsVrX3it7wUHVw0meIL/gSrFzVQWYHpe3l9PJlO3g/1TTsIG9l6KAKU+O0g02qg1JuypXD4hFZqLLBVwchlC0jrMOpgAUA9zR/hTbOja4O8vJJDKxil54GdnAEHNzAVif55fdWQE1FBuufsl8FAAAFaElEQVSFJawckurPXdFniMMqpR3kuSvSexVjB2ObRSNGyYgdO00MhGwHeXQVUx1s0ugWqg7yD5rCqny11A7mwLorJbBOND+FFj4QrA7G2EEXrJpkImmEVR2DfBBAtllAqgv7hWZvVBUjg1ERYS3IsAqVY33PkC/Ccj1Dk1QHHRs4JAMR6tSJaRaNXZNdBsI4J7pNo7IxaaObC1YswqqfozLA99ICq4c2bkO7mPoZEy+7MpK+ll9fJpI2i44/zYNoI8MCMrSQwSigdkI5sFqD2qk4vvwvtYO+hjcJVrH539AzRIAlbeBomu1o2iwaqif5mkWNs5WhSXWQtzL4koXcd/PVQaoOSquDrdrB/IYnBhYAnGTejTbOqcFqEjsY6qJzm/uDaCFDuwDU3RVQR0MGm3mEJXW2hxb8UEpFenZcuStXwSpUYS+eIalZlBuIUKdOyA66sh4xBoJe7q5cnx3kK0MMrCTvLYWy9JJyV4IdHFN4gDtTA+sU8z/RwqWVT7KNerzsy0jGxMnVT/MOdPFRtPFRdJDhfgqoY0EGmxfDLgyiUiox1cEUdtDXDhRhB3nuivZfSWtx043OPfbvuHJXuR3kTTrlJVU2mtpBV6ObVNlwVQfpRW90UR2kVfz8jQ1wR2pg3c/cDR3chvKUGunTnNQOjjvb70AXGbrI0EGGh9trm/+gqtQywMXYxGAiO1h+52PagTisQq0MrgVfsIM0epGqg/QrHmMHaWTFJ4vG2EFXs2geXfk628uraXWwSWWDVwdDdtDR6Da+4QN8OzWwAGDZvB8dPN2Zu2rSLJp/mndgsQBUDxn6CqhZkLEFsHwpFboAS7kruoBP0soQUx2UniHBDtLLVx30rcUnILwVp0l1cHzRJh2+OrjKsPyGcwiFpjLw1UHy3ryyIawM7jEYA9y+E8B6oPlldHBRsDrotoM5oBYLQD1TATWLMhYXY0OIsCQ7KLmUJikV3+y42OogDVBsfcEvIxsKD1d10JWapRudJ517JRW/ZTso5a54KZbnryisQr67fKW2chuVjXrvyAC37gSwHmR2oYuDaKNdWSroElKF1SEs4aNYRIYlZHiJAup4kNksIiyaX3Ut+FKEFWMH6bMV0ywaeobIsADJDsZUBzmseojrbJcK4D5YjV8tqsf/ljec5662U9mYxA5K+StHKFu3gzmwvrUTwAKAh5qPoIuzxFpvD4fQw/6tKGoRV+ENdmPyf0x1LMps4mKMiggrth2o6TMUmh0Xqg46nqFJxyC77OB2xiDz6iDPXS1syw6mqmzwf3cd9a5cobJR9d8DHNwpYO0xv4o2LnR0070Q77FvmvwvV6lUqqq2B6xHmPuji5vE6uAi9uCd9vqp/JQqlUqFaRyk+ljzb+jiTFYdvAp/Yx87hZ9PpVKptrR9YO0zy+jgIvRwVgGrQ+iij7+2V0/lJ1SpVKpC0zuq/kfN49DDbnSxH39rb5zOX6pSqVRjTQ9YKpVKlVgKLJVKNTNSYKlUqpmRAkulUs2MFFgqlWpmpMBSqVQzIwWWSqWaGSmwVCrVzEiBpVKpZkYKLJVKNTNSYKlUqpmRAkulUs2MFFgqlWpmpMBSqVQzIwWWSqWaGSmwVCrVzEiBpVKpZkYKLJVKNTNSYKlUqpmRAkulUs2MFFgqlWpmpMBSqVQzIwWWSqWaGSmwVCrVzEiBpVKpZkYKLJVKNTNSYKlUqpmRAkulUs2MFFgqlWpmpMBSqVQzIwWWSqWaGSmwVCrVzEiBpVKpZkYKLJVKNTNSYKlUqpmRAkulUs2MFFgqlWpmpMBSqVQzIwWWSqWaGSmwVCrVzEiBpVKpZkYKLJVKNTNSYKlUqpnR/wd64TBp9IVkrwAAAABJRU5ErkJggg==" class="rainbow-icon" alt="è™¹">';

    const ALL_PARAMS = {
        king: {
            name: "ã‚­ãƒ³ã‚°ãƒãƒŠãƒãƒŠ",
            settings: ['1','2','3','4','5','6'],
            payout: [97, 99, 101, 104, 107, 110],
            b: [292.6, 282.5, 273.1, 262.1, 244.5, 232.4],
            r: [489.1, 451.9, 417.4, 385.5, 352.3, 332.7],
            gassan: [183.1, 173.8, 165.1, 156.0, 144.5, 136.2],
            bell: [7.25, 7.20, 7.15, 7.10, 7.05, 7.00],
            suika: [42.0, 40.0, 38.0, 35.0, 32.0, 30.0],
            retro: [15.0, 13.7, 12.4, 11.1, 9.8, 8.5],
            lampB: [[0.4,0.3,0.2,0.08,0.02],[0.35,0.3,0.22,0.1,0.03],[0.3,0.28,0.25,0.12,0.05],[0.25,0.25,0.3,0.14,0.06],[0.2,0.22,0.35,0.16,0.07],[0.15,0.18,0.4,0.18,0.09]],
            sideR: [[0.6,0.3,0.08,0.015,0.005],[0.3,0.6,0.05,0.04,0.01],[0.5,0.25,0.2,0.04,0.01],[0.25,0.5,0.15,0.08,0.02],[0.4,0.2,0.3,0.07,0.03],[0.25,0.25,0.25,0.15,0.1]],
            colors: ['--lamp-blue', '--lamp-yellow', '--lamp-green', '--lamp-red', '--lamp-white'],
            labels: ['é’', 'é»„', 'ç·‘', 'èµ¤', RAINBOW_IMG],
            bigG: 20, regG: 10, suikaDenom: 20
        },
        newking: {
            name: "ãƒ‹ãƒ¥ãƒ¼ã‚­ãƒ³ã‚°ãƒãƒŠãƒãƒŠâ…¤",
            settings: ['1','2','3','4','V'],
            payout: [97, 99, 101, 104, 108],
            b: [299, 291, 281, 268, 253],
            r: [496, 471, 442, 409, 372],
            gassan: [186, 180, 172, 162, 150],
            bell: [7.58, 7.52, 7.46, 7.37, 7.25],
            suika: [42.0, 38.5, 36.2, 31.5, 29.3],
            suikaR: [200, 180, 160, 140, 100], 
            retro: [15.00, 13.55, 11.88, 8.70, 8.60],
            lampB: [
               [0.3277, 0.3542, 0.4096, 0.0119, 0.00015],
               [0.2913, 0.3121, 0.3855, 0.0126, 0.0003],
               [0.2621, 0.2789, 0.3542, 0.0157, 0.0006],
               [0.2383, 0.2521, 0.3449, 0.0180, 0.0015],
               [0.2185, 0.2341, 0.3048, 0.0225, 0.0030]
            ],
            sideR: [
               [0.3599, 0.2399, 0.2399, 0.1600, 0.0002],
               [0.2319, 0.3478, 0.1679, 0.2519, 0.0005],
               [0.3357, 0.2238, 0.2637, 0.1758, 0.0010],
               [0.2156, 0.3234, 0.1837, 0.2755, 0.0020],
               [0.2480, 0.2480, 0.2480, 0.2480, 0.0078]
            ],
            // é€šå¸¸(BIGç­ä½“ãƒ©ãƒ³ãƒ—ç­‰)ã¯ç´«ãƒ»è™¹ã‚ã‚Š
            colors: ['--lamp-blue', '--lamp-yellow', '--lamp-green', '--lamp-purple', '--lamp-white'],
            labels: ['é’', 'é»„', 'ç·‘', 'ç´«', RAINBOW_IMG],
            // ã‚µã‚¤ãƒ‰ãƒ©ãƒ³ãƒ—ç”¨ã¯èµ¤ãƒ»è™¹ã‚ã‚Š
            colors_side: ['--lamp-blue', '--lamp-yellow', '--lamp-green', '--lamp-red', '--lamp-white'],
            labels_side: ['é’', 'é»„', 'ç·‘', 'èµ¤', RAINBOW_IMG],
            // REGç­ä½“ãƒ©ãƒ³ãƒ—ç”¨ï¼ˆè™¹ãªã— 4è‰²ï¼‰
            colors_regT: ['--lamp-blue', '--lamp-yellow', '--lamp-green', '--lamp-purple'],
            labels_regT: ['é’', 'é»„', 'ç·‘', 'ç´«'],
            
            bigG: 26, regG: 10, suikaDenom: 14
        }
    };

    let data = loadData();

    function loadData() {
        try {
            const saved = localStorage.getItem('hana_v20_data');
            let d = saved ? JSON.parse(saved) : JSON.parse(JSON.stringify(DEFAULTS));
            if (!d.king) {
                const old = JSON.parse(JSON.stringify(d));
                d = JSON.parse(JSON.stringify(DEFAULTS));
                if(old.machine === 'king') d.king = old.king || JSON.parse(JSON.stringify(SINGLE_DEFAULT));
            }
            return d;
        } catch(e) { return JSON.parse(JSON.stringify(DEFAULTS)); }
    }

    function save() { localStorage.setItem('hana_v20_data', JSON.stringify(data)); renderMain(); }
    function getData() { return data[data.machine]; }

    function init() {
        document.getElementById('machine-select').value = data.machine || 'king';
        syncInputs();
        renderMorningSelector();
        renderMain(); 
    }

    function syncInputs() {
        const d = getData();
        document.getElementById('start-g').value = d.start.g;
        document.getElementById('start-b').value = d.start.b;
        document.getElementById('start-r').value = d.start.r;
    }

    function getP(k, n) { return (k <= 0 || n <= 0) ? "0/0" : `1/${(n/k).toFixed(1)}`; }

    function renderMorningSelector() {
        const pm = ALL_PARAMS[data.machine];
        const d = getData();
        const labs = ['ç™½', ...pm.labels.slice(0,4)];
        const cols = ['var(--lamp-white)', ...pm.colors.slice(0,4)];
        let html = '';
        labs.forEach((l, i) => {
            const isSel = (d.morning === i) ? 'selected-lamp' : '';
            const colStyle = cols[i] === 'rainbow' ? 'class="rainbow"' : `style="color:${cols[i].startsWith('var')?cols[i]:'var('+cols[i]+')'}"`;
            html += `<div class="cell ${isSel}" onclick="setMorning(${i})"><div class="label-large" ${colStyle}>${l}</div></div>`;
        });
        document.getElementById('morning-lamp-selector').innerHTML = html;
    }
    function setMorning(val) { 
        getData().morning = (getData().morning === val) ? -1 : val; 
        save(); renderMorningSelector(); 
    }
    function setViewMode(m) { data.viewMode = m; save(); updateHeader(); }
    function setInputMode(m) { data.mode = m; save(); updateHeader(); }
    function updateMachine() { 
        data.machine = document.getElementById('machine-select').value; 
        syncInputs();
        save(); updateHeader(); renderMorningSelector();
    }
    function saveStart() {
        const d = getData();
        d.start.g = Number(document.getElementById('start-g').value) || 0;
        d.start.b = Number(document.getElementById('start-b').value) || 0;
        d.start.r = Number(document.getElementById('start-r').value) || 0;
        save();
    }

    function renderMain() {
        const d = getData();
        const c = d.cur; const s = d.start;
        const vG = c.g; const vB = c.b; const vR = c.r;
        const isNew = data.machine === 'newking';
        
        let html = '';

        if (isNew) {
            html = `
            <div class="main-layout">
                <div class="col-left">
                    <p class="section-title">ï¼œæ‰“ã¡å§‹ã‚ï¼</p>
                    <div class="grid grid-3">
                        <div class="cell"><div class="label">ã‚²ãƒ¼ãƒ æ•°</div><div class="value">${s.g}</div></div>
                        <div class="cell"><div class="label">BIG</div><div class="value">${s.b}</div></div>
                        <div class="cell"><div class="label">REG</div><div class="value">${s.r}</div></div>
                    </div>
                    <p class="section-title">ï¼œç¾åœ¨ï¼</p>
                    <div class="grid grid-3">${mkC('g','ã‚²ãƒ¼ãƒ æ•°',vG,50)}${mkC('b','BIG',vB)}${mkC('r','REG',vR)}</div>
                    <p class="section-title">ï¼œé€šå¸¸æ™‚ï¼šãƒ™ãƒ«ï¼</p><div class="grid">${mkC('bell','',c.bell)}</div>
                    <p class="section-title">ï¼œãƒœãƒ¼ãƒŠã‚¹ï¼šã‚¹ã‚¤ã‚«ï¼</p>
                    <div class="grid grid-2">${mkC('suika', 'BIG(å‰åŠ)', c.suika)}${mkC('suikaR', 'REG', c.suikaR)}</div>
                </div>
                <div class="col-right">
                    <p class="section-title">ï¼œBIG(å¾ŒåŠ)ï¼šã‚µã‚¤ãƒ‰ãƒ©ãƒ³ãƒ—ï¼</p><div class="grid grid-5">${mkL('regS')}</div>
                    <p class="section-title">ï¼œBIGï¼šç­ä½“ãƒ©ãƒ³ãƒ—ï¼</p><div class="grid grid-5">${mkL('big')}</div>
                    <p class="section-title">ï¼œREGï¼šç­ä½“ãƒ©ãƒ³ãƒ—ï¼</p><div class="grid grid-5" style="grid-template-columns: repeat(4, 1fr);">${mkL('regT')}</div>
                    <p class="section-title">ï¼œãƒ¬ãƒˆãƒ­ã‚µã‚¦ãƒ³ãƒ‰ï¼</p>
                    <div class="grid grid-2">${mkC('retro_d','æ¡ä»¶é”æˆ',c.retro_d)}${mkC('retro','ç™ºç”Ÿ',c.retro)}</div>
                </div>
            </div>`;
        } else {
            html = `
            <div class="main-layout">
                <div class="col-left">
                    <p class="section-title">ï¼œæ‰“ã¡å§‹ã‚ï¼</p>
                    <div class="grid grid-3">
                        <div class="cell"><div class="label">ã‚²ãƒ¼ãƒ æ•°</div><div class="value">${s.g}</div></div>
                        <div class="cell"><div class="label">BIG</div><div class="value">${s.b}</div></div>
                        <div class="cell"><div class="label">REG</div><div class="value">${s.r}</div></div>
                    </div>
                    <p class="section-title">ï¼œç¾åœ¨ï¼</p>
                    <div class="grid grid-3">${mkC('g','ã‚²ãƒ¼ãƒ æ•°',vG,50)}${mkC('b','BIG',vB)}${mkC('r','REG',vR)}</div>
                    <p class="section-title">ï¼œé€šå¸¸æ™‚ï¼šãƒ™ãƒ«ï¼</p><div class="grid">${mkC('bell','',c.bell)}</div>
                    <p class="section-title">ï¼œBIGï¼šã‚¹ã‚¤ã‚«ï¼</p><div class="grid">${mkC('suika','',c.suika)}</div>
                </div>
                <div class="col-right">
                    <p class="section-title">ï¼œBIGï¼šç­ä½“ãƒ©ãƒ³ãƒ—ï¼</p><div class="grid grid-5">${mkL('big')}</div>
                    <p class="section-title">ï¼œREGï¼šã‚µã‚¤ãƒ‰ãƒ©ãƒ³ãƒ—ï¼</p><div class="grid grid-5">${mkL('regS')}</div>
                    <p class="section-title">ï¼œREGï¼šç­ä½“ãƒ©ãƒ³ãƒ—ï¼</p><div class="grid grid-5">${mkL('regT')}</div>
                    <p class="section-title">ï¼œãƒ¬ãƒˆãƒ­ã‚µã‚¦ãƒ³ãƒ‰ï¼</p>
                    <div class="grid grid-2">${mkC('retro_d','æ¡ä»¶é”æˆ',c.retro_d)}${mkC('retro','ç™ºç”Ÿ',c.retro)}</div>
                </div>
            </div>`;
        }

        document.getElementById('main-ui').innerHTML = html;
        if(data.mode === 'tap') attachEvents();
        updateHeader();
        try { setTimeout(calc, 0); } catch(e) {}
    }

    function mkC(id, label, val, step=1) {
        if(data.mode === 'input') return `<div class="cell"><div class="label">${label}</div><input type="number" class="val-input" value="${val}" onchange="getData().cur.${id}=Number(this.value);save();" onfocus="this.select()"></div>`;
        return `<div class="cell t-btn" data-id="${id}" data-step="${step}"><div class="label">${label}</div><div class="value">${val}</div></div>`;
    }

    function mkL(type) {
        const pm = ALL_PARAMS[data.machine];
        const d = getData();
        
        let useCols = pm.colors;
        let useLabs = pm.labels;
        if (data.machine === 'newking') {
            if (type === 'regS') {
                useCols = pm.colors_side;
                useLabs = pm.labels_side;
            } else if (type === 'regT') {
                useCols = pm.colors_regT;
                useLabs = pm.labels_regT;
            }
        }

        return useLabs.map((l, i) => {
            const v = d.lamps[type][i];
            const col = useCols[i];
            const cls = col === 'rainbow' ? 'class="rainbow"' : `style="color:var(${col})"`;
            if(data.mode === 'input') return `<div class="cell"><div class="label" ${cls}>${l}</div><input type="number" class="val-input" value="${v}" onchange="getData().lamps.${type}[${i}]=Number(this.value);save();" onfocus="this.select()"></div>`;
            return `<div class="cell t-lamp" data-type="${type}" data-idx="${i}"><div class="label" ${cls}>${l}</div><div class="value">${v}</div></div>`;
        }).join('');
    }

    function updateHeader() {
        document.getElementById('disp-machine').innerText = ALL_PARAMS[data.machine].name;
        document.getElementById('btn-view-personal').className = `cell ${data.viewMode==='personal'?'active-mode':''}`;
        document.getElementById('btn-view-total').className = `cell ${data.viewMode==='total'?'active-mode':''}`;
        document.getElementById('btn-mode-tap').className = `cell ${data.mode==='tap'?'active-mode':''}`;
        document.getElementById('btn-mode-input').className = `cell ${data.mode==='input'?'active-mode':''}`;
    }

    function attachEvents() {
        document.querySelectorAll('.cell.t-btn, .cell.t-lamp').forEach(el => {
            let sy, sx, isC, timer;
            el.ontouchstart = (e) => {
                sy = e.touches[0].clientY; sx = e.touches[0].clientX; isC = false;
                el.classList.add('touch-active');
                timer = setTimeout(() => { if(!isC) el.classList.add('minus-mode'); }, 600);
            };
            el.ontouchmove = (e) => { if(Math.abs(e.touches[0].clientY - sy) > 10) { isC = true; clearTimeout(timer); el.classList.remove('touch-active', 'minus-mode'); }};
            el.ontouchend = () => {
                clearTimeout(timer);
                if(isC) return;
                const step = (el.classList.contains('minus-mode') ? -1 : 1) * Number(el.dataset.step || 1);
                const d = getData();
                if(el.dataset.id) d.cur[el.dataset.id] = Math.max(0, d.cur[el.dataset.id] + step);
                else d.lamps[el.dataset.type][el.dataset.idx] = Math.max(0, d.lamps[el.dataset.type][el.dataset.idx] + step);
                el.classList.remove('touch-active', 'minus-mode');
                save();
            };
        });
    }

    // è¨ˆç®—é–¢é€£
    function calcLikelihood(n, k, probList) {
        if(n <= 0 || k < 0) return probList.map(()=>1);
        let likes = probList.map(p => {
            const pr = 1/p;
            return Math.exp(k * Math.log(pr) + (n - k) * Math.log(1 - pr));
        });
        const max = Math.max(...likes);
        return likes.map(v => v / (max || 1));
    }
    function calcMultiLikelihood(counts, table) {
        if(counts.reduce((a,b)=>a+b,0) === 0) return table.map(()=>1);
        let likes = table.map(row => {
            let l = 0;
            counts.forEach((c, i) => { if(c > 0) l += c * Math.log(row[i]); });
            return Math.exp(l);
        });
        const max = Math.max(...likes);
        return likes.map(v => v / max);
    }
    function renderBarGraph(likes, settings) {
        const sum = likes.reduce((a,b)=>a+b,0) || 1;
        const pcts = likes.map(v => (v/sum)*100);
        const maxPct = Math.max(...pcts) || 1;
        return pcts.map((p, i) => `
            <div class="bar-row">
                <div class="bar-label">è¨­å®š${settings[i]}</div>
                <div class="bar-bg"><div class="bar-fill" style="width:${(p/maxPct)*100}%"></div></div>
                <div class="bar-val">${p.toFixed(1)}%</div>
            </div>`).join('');
    }

    // è¨ˆç®—å®Ÿè¡Œ
    function calc(targetId = "") {
        const prefix = targetId ? targetId + "-" : "";
        const d = getData();
        const c = d.cur; const s = d.start;
        const pm = ALL_PARAMS[data.machine];
        const isNew = data.machine === 'newking';
        
        const modeStr = data.viewMode === 'total' ? '(å…¨ã¦)' : '(å€‹äºº)';
        if(document.getElementById(prefix+'title-predict')) {
            document.getElementById(prefix+'title-predict').innerText = `ï¼œæ¨æ¸¬è¨­å®š ${modeStr}ï¼`;
            document.getElementById(prefix+'title-expect').innerText = `ï¼œæœŸå¾…å€¤ ${modeStr}ï¼`;
            document.getElementById(prefix+'title-detail').innerText = `ï¼œè©³ç´°ãƒ‡ãƒ¼ã‚¿ ${modeStr}ï¼`;
        }

        let calcG, calcB, calcR;
        if (data.viewMode === 'personal') {
            const diffG = Math.max(0, c.g - s.g);
            const diffB = Math.max(0, c.b - s.b);
            const diffR = Math.max(0, c.r - s.r);
            calcG = diffG; calcB = diffB; calcR = diffR;
        } else {
            calcG = c.g; calcB = c.b; calcR = c.r;
        }
        
        const actG = calcG;
        const totalG_disp = calcG + (calcB * (isNew ? 26 : 20)) + (calcR * 10);

        const lB = calcLikelihood(calcG, calcB, pm.b);
        const lR = calcLikelihood(calcG, calcR, pm.r);
        const lG = calcLikelihood(calcG, calcB + calcR, pm.gassan);
        const lBell = calcLikelihood(actG, c.bell, pm.bell);
        const lSui = calcLikelihood(calcB * pm.suikaDenom, c.suika, pm.suika);
        const lRet = (c.retro_d > 0) ? calcLikelihood(c.retro_d, c.retro, pm.retro) : pm.settings.map(()=>1);
        
        let lSuiR = pm.settings.map(()=>1);
        if(isNew && c.suikaR > 0) lSuiR = calcLikelihood(calcR * 10, c.suikaR, pm.suikaR);

        let bigLamps = [...d.lamps.big]; if(d.morning >= 1) bigLamps[d.morning-1]++;
        const lBigL = calcMultiLikelihood(bigLamps, pm.lampB);
        const lSidL = calcMultiLikelihood(d.lamps.regS, pm.sideR);

        let lRegL = pm.settings.map(()=>1);
        const t = d.lamps.regT;
        if(isNew) {
            if(t[3]>0) lRegL=[0,0,0,0,1];      // ç´« 
            else if(t[2]>0) lRegL=[0,0,0,1,1]; // ç·‘
            else if(t[1]>0) lRegL=[0,0,1,1,1]; // é»„
            else if(t[0]>0) lRegL=[0,1,1,1,1]; // é’
        } else {
            if(t[4]>0) lRegL=[0,0,0,0,0,1]; else if(t[3]>0) lRegL=[0,0,0,0,1,1];
            else if(t[2]>0) lRegL=[0,0,0,1,1,1]; else if(t[1]>0) lRegL=[0,0,1,1,1,1]; else if(t[0]>0) lRegL=[0,1,1,1,1,1];
        }

        const totalL = lB.map((v, i) => v * lR[i] * lBell[i] * lSui[i] * lSuiR[i] * lRet[i] * lBigL[i] * lSidL[i] * lRegL[i]);
        document.getElementById(prefix+'predict-bars').innerHTML = renderBarGraph(totalL, pm.settings);

        const sumL = totalL.reduce((a,b)=>a+b,0) || 1;
        const pcts = totalL.map(v => v/sumL);
        let expSet = 0; 
        pcts.forEach((p, i) => { expSet += p * (i+1); });
        const expRate = pcts.reduce((a, b, i) => a + (b * pm.payout[i]), 0);
        const diff = (calcG * 3) * (expRate/100 - 1);

        let colorStyle = '#0f0';
        if (expRate < 100) colorStyle = '#ff4444'; 
        else if (Math.abs(expRate - 100) < 0.01 && Math.round(diff) === 0) colorStyle = '#ffffff';

        document.getElementById(prefix+'expect-info').innerHTML = `
            <div class="expect-row"><div>ç·å›è»¢æ•°</div><div class="expect-val" style="color:#fff">${totalG_disp} G</div></div>
            <div class="expect-row"><div>æœŸå¾…è¨­å®š</div><div class="expect-val" style="color:${colorStyle}">${expSet.toFixed(2)}</div></div>
            <div class="expect-row"><div>æœŸå¾…æ©Ÿæ¢°å‰²</div><div class="expect-val" style="color:${colorStyle}">${expRate.toFixed(2)}%</div></div>
            <div class="expect-row"><div>æœŸå¾…ç²å¾—æšæ•°</div><div class="expect-val" style="color:${colorStyle}">${diff >= 0 ? '+' : ''}${Math.round(diff)} æš</div></div>
        `;

        let rows = [
            { id:'g', lab:'é€šå¸¸æ™‚å›è»¢æ•°', val:`${calcG}å›è»¢`, l:null },
            { id:'b', lab:'BIG', val:`${calcB}å› <span class="white-txt">(${getP(calcB, calcG)})</span>`, l:lB },
            { id:'r', lab:'REG', val:`${calcR}å› <span class="white-txt">(${getP(calcR, calcG)})</span>`, l:lR },
            { id:'gas', lab:'åˆç®—', val:`${calcB+calcR}å› <span class="white-txt">(${getP(calcB+calcR, calcG)})</span>`, l:lG },
            { id:'bel', lab:'é€šå¸¸æ™‚ï¼šãƒ™ãƒ«', val:`${c.bell}å› <span class="white-txt">(${getP(c.bell, actG)})</span>`, l:lBell },
            { id:'sui', lab: isNew?'BIG(å‰åŠ)ï¼šã‚¹ã‚¤ã‚«':'BIGï¼šã‚¹ã‚¤ã‚«', val:`${c.suika}å› <span class="white-txt">(${getP(c.suika, calcB * pm.suikaDenom)})</span>`, l:lSui }
        ];
        if(isNew) rows.push({ id:'suiR', lab:'REGï¼šã‚¹ã‚¤ã‚«', val:`${c.suikaR}å› <span class="white-txt">(${getP(c.suikaR, calcR * 10)})</span>`, l:lSuiR });

        const lblSide = isNew ? "BIG(å¾ŒåŠ)ï¼šã‚µã‚¤ãƒ‰" : "REGï¼šã‚µã‚¤ãƒ‰";
        rows.push({ id:'bl', lab: isNew?'BIGï¼šã‚µã‚¤ãƒ‰ãƒ©ãƒ³ãƒ—':lblSide, val:mkLmpT(d.lamps.regS, pm, 'regS'), l:lSidL }); 
        rows.push({ id:'sl', lab: 'BIGï¼šç­ä½“ãƒ©ãƒ³ãƒ—', val:mkLmpT(bigLamps, pm, 'big'), l:lBigL });
        rows.push({ id:'rl', lab:'REGï¼šç­ä½“ãƒ©ãƒ³ãƒ—', val:mkLmpT(d.lamps.regT, pm, 'regT'), l:lRegL });
        rows.push({ id:'ret', lab:'ãƒ¬ãƒˆãƒ­ã‚µã‚¦ãƒ³ãƒ‰', val:`${c.retro}å› <span class="white-txt">(${c.retro}/${c.retro_d})</span>`, l:lRet });

        const container = document.getElementById(prefix+'detail-rows');
        container.innerHTML = rows.map((r, i) => {
            if (targetId === 'cap') {
                return `<tr><th>${r.lab}</th><td>${r.val}</td></tr>${r.l ? `<tr><td colspan="2"><div style="padding:2px">${renderBarGraph(r.l, pm.settings)}</div></td></tr>` : ''}`;
            } else {
                const clickEvent = (r.id === 'g') ? '' : `onclick="toggleGraph('g-${i}')"`;
                const graphHtml = (r.id === 'g') ? '' : `<tr id="g-${i}" class="sub-graph-row"><td colspan="2"><div style="padding:5px">${r.l ? '<p style="font-size:10px;color:#aaa">â–¼å€‹åˆ¥è¨­å®šæ¨æ¸¬</p>'+renderBarGraph(r.l, pm.settings) : '<p style="font-size:10px;color:#aaa">æ¨æ¸¬å¯¾è±¡å¤–</p>'}</div></td></tr>`;
                return `<tr ${clickEvent}><th>${r.lab}</th><td>${r.val}</td></tr>` + graphHtml;
            }
        }).join('');
    }

    function mkLmpT(arr, pm, type) {
        let cols = pm.colors;
        let labs = pm.labels;
        if (data.machine === 'newking') {
            if (type === 'regS') { cols = pm.colors_side; labs = pm.labels_side; }
            else if (type === 'regT') { cols = pm.colors_regT; labs = pm.labels_regT; }
        }

        return arr.map((v,i) => {
            if(!cols[i]) return ""; 
            const col = cols[i]; const lab = labs[i];
            const s = col==='rainbow'?'class="rainbow"':`style="color:var(${col})"`;
            return `<span ${s}>${lab}</span>:${v}`;
        }).join(' ');
    }

    function toggleGraph(id) {
        const el = document.getElementById(id);
        const isOp = el.classList.contains('open');
        document.querySelectorAll('.sub-graph-row').forEach(r => r.classList.remove('open'));
        if(!isOp) el.classList.add('open');
    }

    function exportData() {
        const d = new Date();
        const dateStr = `${d.getFullYear()}/${d.getMonth()+1}/${d.getDate()}`;
        const dat = getData();
        const pm = ALL_PARAMS[data.machine];
        
        let calcG, calcB, calcR;
        if (data.viewMode === 'personal') {
            const diffG = Math.max(0, dat.cur.g - dat.start.g);
            const diffB = Math.max(0, dat.cur.b - dat.start.b);
            const diffR = Math.max(0, dat.cur.r - dat.start.r);
            calcG = diffG;
            calcB = diffB; calcR = diffR;
        } else {
            calcG = dat.cur.g;
            calcB = dat.cur.b; calcR = dat.cur.r;
        }
        
        const totalG_out = calcG + (calcB * (data.machine === 'newking' ? 26 : 20)) + (calcR * 10);
        const bL = [...dat.lamps.big]; if(dat.morning>=1) bL[dat.morning-1]++;
        
        let txt = "";
        if (data.machine === 'newking') {
            // [ä¿®æ­£ç®‡æ‰€] ãƒ‹ãƒ¥ãƒ¼ã‚­ãƒ³ã‚°ã®å ´åˆã®ã¿ã€REGç­ä½“ãƒ©ãƒ³ãƒ—ã®å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã‚’4ã¤ã«åˆ¶é™(slice(0,4))ã—ã€è™¹ã‚’é™¤å¤–
            const regT_out = dat.lamps.regT.slice(0, 4);
            const row = [dateStr, totalG_out, calcG, (calcB*26)+(calcR*10), calcB, calcR, dat.cur.bell, dat.cur.suika, dat.cur.suikaR, ...dat.lamps.regS, ...bL, ...regT_out, dat.cur.retro_d, dat.cur.retro];
            txt = row.join('\t');
        } else {
            const row = [dateStr, totalG_out, calcG, (calcB*20)+(calcR*10), calcB, calcR, dat.cur.bell, dat.cur.suika, ...bL, ...dat.lamps.regS, ...dat.lamps.regT, dat.cur.retro_d, dat.cur.retro];
            txt = row.join('\t');
        }

        navigator.clipboard.writeText(txt).then(() => {
            if (typeof html2canvas === 'undefined') {
                alert("ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚"); return;
            }
            if(confirm("ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚\nè¨­å®šæ¨æ¸¬ç”»åƒã‚’ç”Ÿæˆã—ã¾ã™ã‹ï¼Ÿ\n(ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§çµ‚äº†)")) {
                setTimeout(() => generateImage(), 100);
            }
        });
    }

    function generateImage() {
        document.getElementById('cap-machine').innerText = ALL_PARAMS[data.machine].name;
        
        calc('cap');
        
        const target = document.getElementById('capture-content');
        const container = document.getElementById('capture-container');
        container.style.visibility = 'visible';
        
        html2canvas(target, { backgroundColor: "#1a1a1a", scale: 4 }).then(canvas => {
            const imgData = canvas.toDataURL("image/png");
            document.getElementById('img-preview').src = imgData;
            document.getElementById('img-modal').style.display = 'flex';
            container.style.visibility = 'hidden';
        }).catch(e => {
            alert("ç”»åƒã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
            container.style.visibility = 'hidden';
        });
    }

    function downloadImage() {
        const link = document.createElement('a');
        link.download = `hana_setting_${data.machine}_${Date.now()}.png`;
        link.href = document.getElementById('img-preview').src;
        link.click();
    }

    function openModal(id) { document.getElementById(id).classList.add('active'); if(id==='predict-modal') calc(); }
    function closeModal(id) { document.getElementById(id).classList.remove('active'); }
    function resetAll() { if(confirm("ç¾åœ¨é¸æŠä¸­ã®æ©Ÿç¨®ãƒ‡ãƒ¼ã‚¿ã‚’å…¨æ¶ˆå»ã—ã¾ã™ã‹ï¼Ÿ")) { 
        if(data.machine === 'king') data.king = JSON.parse(JSON.stringify(SINGLE_DEFAULT));
        else data.newking = JSON.parse(JSON.stringify(SINGLE_DEFAULT));
        save(); location.reload(); 
    }}

    window.onload = init;
</script>

<div id="capture-container" style="position:fixed; top:0; left:0; width:100%; height:100%; z-index:-1; visibility:hidden; overflow:hidden;">
    <div id="capture-content" style="width:400px; background:#1a1a1a; padding:20px; box-sizing:border-box;">
        <h3 style="text-align:center; color:white; border-bottom:1px solid #fff; padding-bottom:10px;">ãƒãƒŠãƒãƒŠã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</h3>
        <p class="section-title" style="color:#ddd">æ©Ÿç¨®: <span id="cap-machine"></span></p>
        <p class="section-title" style="color:#ddd" id="cap-title-predict">ï¼œæ¨æ¸¬è¨­å®šï¼</p>
        <div id="cap-predict-bars" style="background:#222; padding:5px 10px; border-radius:5px; margin-bottom:10px;"></div>
        <p class="section-title" style="color:#ddd" id="cap-title-expect">ï¼œæœŸå¾…å€¤ï¼</p>
        <div id="cap-expect-info" class="expect-box"></div>
        <p class="section-title" style="color:#ddd" id="cap-title-detail">ï¼œè©³ç´°ãƒ‡ãƒ¼ã‚¿ï¼</p>
        <table class="detail-table" id="cap-detail-rows"></table>
    </div>
</div>

</body>
</html>
